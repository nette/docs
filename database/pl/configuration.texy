Konfiguracja bazy danych
************************

.[perex]
Przegląd opcji konfiguracyjnych dla Nette Database.

Jeśli nie używasz całego frameworka, a jedynie tej biblioteki, przeczytaj [jak załadować konfigurację |bootstrap:].


Jedno połączenie .[#toc-jedno-spojeni]
--------------------------------------

Skonfiguruj pojedyncze połączenie z bazą danych:

```neon
database:
	# DSN, jediný povinný klíč
	dsn: "sqlite:%appDir%/Model/demo.db"

	# uživatelské jméno
	user: ...

	# heslo
	password: ...
```

Tworzy serwis `Nette\Database\Connection` oraz `Nette\Database\Explorer` dla warstwy [Database Explorer |explorer]. Baza danych jest zwykle przekazywana [przez autowiring |dependency-injection:autowiring], jeśli nie jest to możliwe, należy użyć odpowiednio nazw serwisów `@database.default.connection` i `@database.default.explorer`,.

Inne ustawienia:

```neon
database:
	# zobrazit database panel v Tracy Bar?
	debugger: ...     # (bool) výchozí je true

	# zobrazit EXPLAIN dotazů v Tracy Bar?
	explain: ...      # (bool) výchozí je true

	# povolit autowiring pro toto spojení?
	autowired: ...    # (bool) výchozí je true u prvního připojení

	# konvence tabulek: discovered, static nebo jméno třídy
	conventions: discovered  # (string) výchozí je 'discovered'

	options:
		# připojovat se k databázi teprve když je potřeba?
		lazy: ...     # (bool) výchozí je false

		# PHP třída ovladače databáze
		driverClass:  # (string)

		# pouze MySQL: nastaví sql_mode
		sqlmode:      # (string)

		# pouze MySQL: nastaví SET NAMES
		charset:      # (string) výchozí je 'utf8mb4' ('utf8' před verzí 5.5.3)

		# pouze Oracle a SQLite: formát pro ukládání data
		formatDateTime: # (string) výchozí je 'U'
```

W kluczu `options` można określić dodatkowe opcje, które można znaleźć w [dokumentacji sterownika PDO |https://www.php.net/manual/en/pdo.drivers.php], takie jak:

```neon
database:
	options:
		PDO::MYSQL_ATTR_COMPRESS: true
```


Więcej połączeń .[#toc-vice-spojeni]
------------------------------------

W konfiguracji możemy zdefiniować więcej połączeń z bazą danych, dzieląc je na nazwane sekcje:

```neon
database:
	main:
		dsn: 'mysql:host=127.0.0.1;dbname=test'
		user: root
		password: password

	another:
		dsn: 'sqlite::memory:'
```

Każde tak zdefiniowane połączenie tworzy serwisy, które w nazwie zawierają nazwę sekcji, czyli `@database.main.connection` & `@database.main.explorer` a następnie `@database.another.connection` & `@database.another.explorer`.

Autowiring jest włączony tylko dla usług z pierwszej sekcji. Można to zmienić za pomocą `autowired: false` lub `autowired: true`. Usługi nieautoryzowane przekazujemy jawnie:

```neon
services:
	- UserFacade(@database.another.connection)
```

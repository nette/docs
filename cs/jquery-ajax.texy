Ajax s jQuery
#############

Řešení ajaxu pro Nette pomocí jQuery.

|Verze | 0.1
|Forum thread | http://forum.nette.org/cs/1300-neco-jako-nette-js-s-jquery
|Autor | Jan Marek
|Licence | MIT

Instalace
=========

Je potřeba zkopírovat tento javascriptový kód a nalinkovat ho do webu.
/--code js
jQuery.extend({
        updateSnippet: function (id, html) {
                $("#" + id).html(html);
        },

        netteCallback: function (data) {
                // redirect
                if (data.redirect) {
                        window.location.href = data.redirect;
                }

                // snipeti
                if (data.snippets) {
                        for (var i in data.snippets) {
                                jQuery.updateSnippet(i, data.snippets[i]);
                        }
                }
        }
});

jQuery.ajaxSetup({
        success: function (data) {
                jQuery.netteCallback(data);
        },
        dataType: "json"
});
\--


Příklad použití
===============

Stačí běžné zavolání nějaké [ajaxovací funkce z jQuery | http://docs.jquery.com/Ajax]:

/--code js
$.post("someUrl");
$.get("someUrl");
\--

Použití v unobstructive javascriptu
-----------------------------------

Následující kód po načtení stránky přiřadí všem současným i v budoucnu vzniklým odkazům s třídou ajax po kliknutí ajaxové zpracování.

/--code js
$(function () {
	$("a.ajax").live("click", function () {
		$.get(this.href);
		return false;
	});
});
\--

Volání vlastního callbacku
--------------------------

Pokud zavoláte ajaxovací funkci z vlastní callbackem, tak se přepíše globální nette callback. Ovšem ten se dá explicitně zavolat.

/--code js
$.get("someUrl", function (data) {
	$.netteCallback(data);
	doSomethingElse();
});
\--

Vlastní efekt pro update snippetu
---------------------------------

Dá se přepsat metoda `$.updateSnippet` (zavedená tímto pluginem), například takto:

/--code js
jQuery.extend({
        updateSnippet: function (id, data) {
                $("#" + id).fadeOut("fast", function () {
                        $(this).html(data).fadeIn("fast");
                });
        }
});
\--

Efekty s točícím kolečkem
-------------------------

Se dají přidělat pomocí klasického jQuery.

/--code js
$(function () {
	// vhodně nastylovaný div vložím po načtení stránky
	$('<div id="ajax-spinner"></div>').ajaxStart(function () {
		// po ajaxStartu ukážu
		$(this).show();
	}).ajaxStop(function () {
		// a při ajaxStopu schovám
		$(this).hide();
	}).appendTo("body").hide();
});
\--

Historie
********

{{author: Honza Marek|516}}

Paginator
*********

.[perex]
Необходимо е да подредите страниците на изхвърляне на данни? Тъй като математиката на странирането може да бъде сложна, [api:Nette\Utils\Paginator] може да ви помогне с това.

Монтаж:

```shell
composer require nette/utils
```

Създаване на обект за странициране и задаване на основната му информация:

```php
$paginator = new Nette\Utils\Paginator;
$paginator->setPage(1); // номер текущей страницы
$paginator->setItemsPerPage(30); // количество элементов на странице
$paginator->setItemCount(356); // общее количество элементов, если известно
```

Страниците са номерирани от 1. Можем да променим това с помощта на `setBase()`:

```php
$paginator->setBase(0); // нумерация с 0
```

Обектът вече ще предоставя цялата основна информация, полезна за създаването на страница за страниране. Например можете да го предадете на шаблон и да го използвате там.

```php
$paginator->isFirst(); // мы на первой странице?
$paginator->isLast(); // мы на последней странице?
$paginator->getPage(); // номер текущей страницы
$paginator->getFirstPage(); // номер первой страницы
$paginator->getLastPage(); // номер последней страницы
$paginator->getFirstItemOnPage(); // порядковый номер первого элемента на странице
$paginator->getLastItemOnPage(); // порядковый номер последнего элемента на странице
$paginator->getPageIndex(); // номер текущей страницы, нумерация от 0
$paginator->getPageCount(); // общее количество страниц
$paginator->getItemsPerPage(); // количество элементов на странице
$paginator->getItemCount(); // общее количество элементов, если известно
```

Конструкторът на страници ще ви помогне да правите SQL заявки. Методите `getLength()` и `getOffset()` връщат стойности, които да се използват в клаузите LIMIT и OFFSET:

```php
$result = $database->query(
	'SELECT * FROM items LIMIT ? OFFSET ?',
	$paginator->getLength(),
	$paginator->getOffset(),
);
```

Ако трябва да подредим страниците в обратен ред, т.е. страница 1 да отговаря на най-високото отместване, използваме `getCountdownOffset()`:

```php
$result = $database->query(
	'SELECT * FROM items LIMIT ? OFFSET ?',
	$paginator->getLength(),
	$paginator->getCountdownOffset(),
);
```

Пример за използване на тази функция в приложение е даден в готварската книга [Database Results Pagination |best-practices:pagination].

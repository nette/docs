–ì–ª–æ–±–∞–ª–Ω–æ —Å—ä—Å—Ç–æ—è–Ω–∏–µ –∏ –µ–¥–∏–Ω–∏—á–Ω–∏ —á–∏—Å–ª–∞
***********************************

.[perex]
–ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ: –°–ª–µ–¥–Ω–∏—Ç–µ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ —Å–∞ —Å–∏–º–ø—Ç–æ–º–∏ –Ω–∞ –ª–æ—à–æ –ø—Ä–æ–µ–∫—Ç–∏—Ä–∞–Ω –∫–æ–¥:

- `Foo::getInstance()`
- `DB::insert(...)`
- `Article::setDb($db)`
- `ClassName::$var` –∏–ª–∏ `static::$var`

–°—Ä–µ—â–∞—Ç–µ –ª–∏ –Ω—è–∫–æ–∏ –æ—Ç —Ç–µ–∑–∏ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –≤ –∫–æ–¥–∞ —Å–∏? –ê–∫–æ –µ —Ç–∞–∫–∞, –∏–º–∞—Ç–µ –≤—ä–∑–º–æ–∂–Ω–æ—Å—Ç –¥–∞ –≥–æ –ø–æ–¥–æ–±—Ä–∏—Ç–µ. –ú–æ–∂–µ –±–∏ —Å–∏ –º–∏—Å–ª–∏—Ç–µ, —á–µ —Ç–æ–≤–∞ —Å–∞ –æ–±—â–∏ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏, –∫–æ–∏—Ç–æ —á–µ—Å—Ç–æ —Å–µ —Å—Ä–µ—â–∞—Ç –≤ –ø—Ä–∏–º–µ—Ä–Ω–∏ —Ä–µ—à–µ–Ω–∏—è –Ω–∞ —Ä–∞–∑–ª–∏—á–Ω–∏ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ –∏ —Ñ—Ä–µ–π–º—É—ä—Ä–∫–∏. –ê–∫–æ —Å–ª—É—á–∞—è—Ç –µ —Ç–∞–∫—ä–≤, –¥–∏–∑–∞–π–Ω—ä—Ç –Ω–∞ —Ç–µ—Ö–Ω–∏—è –∫–æ–¥ –µ –ø–æ–≥—Ä–µ—à–µ–Ω.

–¢—É–∫ –Ω–µ —Å—Ç–∞–≤–∞ –¥—É–º–∞ –∑–∞ –Ω—è–∫–∞–∫–≤–∞ –∞–∫–∞–¥–µ–º–∏—á–Ω–∞ —á–∏—Å—Ç–æ—Ç–∞. –í—Å–∏—á–∫–∏ —Ç–µ–∑–∏ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –∏–º–∞—Ç –µ–¥–Ω–∞ –æ–±—â–∞ —á–µ—Ä—Ç–∞: –∏–∑–ø–æ–ª–∑–≤–∞—Ç –≥–ª–æ–±–∞–ª–Ω–æ —Å—ä—Å—Ç–æ—è–Ω–∏–µ. –ê —Ç–æ–≤–∞ –æ–∫–∞–∑–≤–∞ —Ä–∞–∑—Ä—É—à–∏—Ç–µ–ª–Ω–æ –≤—ä–∑–¥–µ–π—Å—Ç–≤–∏–µ –≤—ä—Ä—Ö—É –∫–∞—á–µ—Å—Ç–≤–æ—Ç–æ –Ω–∞ –∫–æ–¥–∞. –ö–ª–∞—Å–æ–≤–µ—Ç–µ —Å–∞ –∏–∑–º–∞–º–Ω–∏ –ø–æ –æ—Ç–Ω–æ—à–µ–Ω–∏–µ –Ω–∞ —Å–≤–æ–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏. –ö–æ–¥—ä—Ç —Å—Ç–∞–≤–∞ –Ω–µ–ø—Ä–µ–¥—Å–∫–∞–∑—É–µ–º. –¢–æ–≤–∞ –æ–±—ä—Ä–∫–≤–∞ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏—Ü–∏—Ç–µ –∏ –Ω–∞–º–∞–ª—è–≤–∞ —Ç—è—Ö–Ω–∞—Ç–∞ –µ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç.

–í —Ç–∞–∑–∏ –≥–ª–∞–≤–∞ —â–µ –æ–±—è—Å–Ω–∏–º –∑–∞—â–æ —Ç–æ–≤–∞ –µ —Ç–∞–∫–∞ –∏ –∫–∞–∫ –¥–∞ –∏–∑–±–µ–≥–Ω–µ–º –≥–ª–æ–±–∞–ª–Ω–æ—Ç–æ —Å—ä—Å—Ç–æ—è–Ω–∏–µ.


–ì–ª–æ–±–∞–ª–Ω–æ —Å–≤—ä—Ä–∑–≤–∞–Ω–µ .[#toc-global-interlinking]
----------------------------------------------

–í –∏–¥–µ–∞–ª–Ω–∏—è —Å–≤—è—Ç –µ–¥–∏–Ω –æ–±–µ–∫—Ç —Ç—Ä—è–±–≤–∞ –¥–∞ –∫–æ–º—É–Ω–∏–∫–∏—Ä–∞ —Å–∞–º–æ —Å –æ–±–µ–∫—Ç–∏, –∫–æ–∏—Ç–æ —Å–∞ [–º—É –ø—Ä–µ–¥–∞–¥–µ–Ω–∏ –¥–∏—Ä–µ–∫—Ç–Ω–æ |passing-dependencies]. –ê–∫–æ —Å—ä–∑–¥–∞–º –¥–≤–∞ –æ–±–µ–∫—Ç–∞ `A` –∏ `B` –∏ –Ω–∏–∫–æ–≥–∞ –Ω–µ –ø—Ä–µ–¥–∞–º —Ä–µ—Ñ–µ—Ä–µ–Ω—Ü–∏—è –º–µ–∂–¥—É —Ç—è—Ö, —Ç–æ–≥–∞–≤–∞ –Ω–∏—Ç–æ `A`, –Ω–∏—Ç–æ `B` –º–æ–≥–∞—Ç –¥–∞ –ø–æ–ª—É—á–∞—Ç –¥–æ—Å—Ç—ä–ø –¥–æ —Å—ä—Å—Ç–æ—è–Ω–∏–µ—Ç–æ –Ω–∞ –¥—Ä—É–≥–∏—è –∏–ª–∏ –¥–∞ –≥–æ –ø—Ä–æ–º–µ–Ω—è—Ç. –¢–æ–≤–∞ –µ –º–Ω–æ–≥–æ –∂–µ–ª–∞—Ç–µ–ª–Ω–æ —Å–≤–æ–π—Å—Ç–≤–æ –Ω–∞ –∫–æ–¥–∞. –¢–æ –ø—Ä–∏–ª–∏—á–∞ –Ω–∞ —Ç–æ–≤–∞ –¥–∞ –∏–º–∞—Ç–µ –±–∞—Ç–µ—Ä–∏—è –∏ –µ–ª–µ–∫—Ç—Ä–∏—á–µ—Å–∫–∞ –∫—Ä—É—à–∫–∞; –∫—Ä—É—à–∫–∞—Ç–∞ –Ω—è–º–∞ –¥–∞ —Å–≤–µ—Ç–Ω–µ, –¥–æ–∫–∞—Ç–æ –Ω–µ —è —Å–≤—ä—Ä–∂–µ—Ç–µ –∫—ä–º –±–∞—Ç–µ—Ä–∏—è—Ç–∞ —Å –ø—Ä–æ–≤–æ–¥–Ω–∏–∫.

–¢–æ–≤–∞ –æ–±–∞—á–µ –Ω–µ –µ –≤–∞–ª–∏–¥–Ω–æ –∑–∞ –≥–ª–æ–±–∞–ª–Ω–∏—Ç–µ (—Å—Ç–∞—Ç–∏—á–Ω–∏) –ø—Ä–æ–º–µ–Ω–ª–∏–≤–∏ –∏–ª–∏ –µ–¥–∏–Ω–∏—á–Ω–∏—Ç–µ –ø—Ä–æ–º–µ–Ω–ª–∏–≤–∏. –û–±–µ–∫—Ç—ä—Ç `A` –º–æ–∂–µ –¥–∞ –ø–æ–ª—É—á–∏ *–±–µ–∑–∂–∏—á–µ–Ω* –¥–æ—Å—Ç—ä–ø –¥–æ –æ–±–µ–∫—Ç–∞ `C` –∏ –¥–∞ –≥–æ –º–æ–¥–∏—Ñ–∏—Ü–∏—Ä–∞ –±–µ–∑ –ø—Ä–µ–¥–∞–≤–∞–Ω–µ –Ω–∞ —Ä–µ—Ñ–µ—Ä–µ–Ω—Ü–∏—è, –∫–∞—Ç–æ –∏–∑–≤–∏–∫–∞ `C::changeSomething()`. –ê–∫–æ –æ–±–µ–∫—Ç—ä—Ç `B` —Å—ä—â–æ —Å–µ —Å–≤—ä—Ä–∑–≤–∞ —Å –≥–ª–æ–±–∞–ª–Ω–∞—Ç–∞ –ø—Ä–æ–º–µ–Ω–ª–∏–≤–∞ `C`, —Ç–æ–≥–∞–≤–∞ `A` –∏ `B` –º–æ–≥–∞—Ç –¥–∞ —Å–∏ –≤–ª–∏—è—è—Ç –≤–∑–∞–∏–º–Ω–æ —á—Ä–µ–∑ `C`.

–ò–∑–ø–æ–ª–∑–≤–∞–Ω–µ—Ç–æ –Ω–∞ –≥–ª–æ–±–∞–ª–Ω–∏ –ø—Ä–æ–º–µ–Ω–ª–∏–≤–∏ –≤—ä–≤–µ–∂–¥–∞ –Ω–æ–≤–∞ —Ñ–æ—Ä–º–∞ –Ω–∞ *–±–µ–∑–∂–∏—á–Ω–æ* —Å–≤—ä—Ä–∑–≤–∞–Ω–µ, –∫–æ—è—Ç–æ –Ω–µ –µ –≤–∏–¥–∏–º–∞ –æ—Ç–≤—ä–Ω. –¢—è —Å—ä–∑–¥–∞–≤–∞ –¥–∏–º–Ω–∞ –∑–∞–≤–µ—Å–∞, –∫–æ—è—Ç–æ —É—Å–ª–æ–∂–Ω—è–≤–∞ —Ä–∞–∑–±–∏—Ä–∞–Ω–µ—Ç–æ –∏ –∏–∑–ø–æ–ª–∑–≤–∞–Ω–µ—Ç–æ –Ω–∞ –∫–æ–¥–∞. –ó–∞ –¥–∞ —Ä–∞–∑–±–µ—Ä–∞—Ç –Ω–∞–∏—Å—Ç–∏–Ω–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏—Ç–µ, —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏—Ü–∏—Ç–µ —Ç—Ä—è–±–≤–∞ –¥–∞ –ø—Ä–æ—á–µ—Ç–∞—Ç –≤—Å–µ–∫–∏ —Ä–µ–¥ –æ—Ç –∏–∑—Ö–æ–¥–Ω–∏—è –∫–æ–¥, –∞ –Ω–µ —Å–∞–º–æ –¥–∞ —Å–µ –∑–∞–ø–æ–∑–Ω–∞—è—Ç —Å –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∏—Ç–µ –Ω–∞ –∫–ª–∞—Å–æ–≤–µ—Ç–µ. –û—Å–≤–µ–Ω —Ç–æ–≤–∞ —Ç–æ–≤–∞ –∑–∞–ø–ª–∏—Ç–∞–Ω–µ –µ –Ω–∞–ø—ä–ª–Ω–æ –Ω–µ–Ω—É–∂–Ω–æ. –ì–ª–æ–±–∞–ª–Ω–æ—Ç–æ —Å—ä—Å—Ç–æ—è–Ω–∏–µ —Å–µ –∏–∑–ø–æ–ª–∑–≤–∞, –∑–∞—â–æ—Ç–æ –µ –ª–µ—Å–Ω–æ –¥–æ—Å—Ç—ä–ø–Ω–æ –æ—Ç–≤—Å—è–∫—ä–¥–µ –∏ –ø–æ–∑–≤–æ–ª—è–≤–∞ –Ω–∞–ø—Ä–∏–º–µ—Ä –∑–∞–ø–∏—Å –≤ –±–∞–∑–∞ –¥–∞–Ω–Ω–∏ —á—Ä–µ–∑ –≥–ª–æ–±–∞–ª–µ–Ω (—Å—Ç–∞—Ç–∏—á–µ–Ω) –º–µ—Ç–æ–¥ `DB::insert()`. –í—ä–ø—Ä–µ–∫–∏ —Ç–æ–≤–∞, –∫–∞–∫—Ç–æ —â–µ –≤–∏–¥–∏–º, –ø–æ–ª–∑–∞—Ç–∞ –æ—Ç –Ω–µ–≥–æ –µ –º–∏–Ω–∏–º–∞–ª–Ω–∞, –∞ —É—Å–ª–æ–∂–Ω–µ–Ω–∏—è—Ç–∞, –∫–æ–∏—Ç–æ –≤—ä–≤–µ–∂–¥–∞, —Å–∞ —Å–µ—Ä–∏–æ–∑–Ω–∏.

.[note]
–ü–æ –æ—Ç–Ω–æ—à–µ–Ω–∏–µ –Ω–∞ –ø–æ–≤–µ–¥–µ–Ω–∏–µ—Ç–æ –Ω—è–º–∞ —Ä–∞–∑–ª–∏–∫–∞ –º–µ–∂–¥—É –≥–ª–æ–±–∞–ª–Ω–∞ –∏ —Å—Ç–∞—Ç–∏—á–Ω–∞ –ø—Ä–æ–º–µ–Ω–ª–∏–≤–∞. –¢–µ —Å–∞ –µ–¥–Ω–∞–∫–≤–æ –≤—Ä–µ–¥–Ω–∏.


–ü—Ä–∏–∑—Ä–∞—á–Ω–æ –¥–µ–π—Å—Ç–≤–∏–µ –Ω–∞ —Ä–∞–∑—Å—Ç–æ—è–Ω–∏–µ (Spooky Action at a Distance) .[#toc-the-spooky-action-at-a-distance]
------------------------------------------------------------------------------------------------------

"–ü—Ä–∏–∑—Ä–∞—á–Ω–æ –¥–µ–π—Å—Ç–≤–∏–µ –Ω–∞ —Ä–∞–∑—Å—Ç–æ—è–Ω–∏–µ" - —Ç–∞–∫–∞ –ê–ª–±–µ—Ä—Ç –ê–π–Ω—â–∞–π–Ω –Ω–∞—Ä–∏—á–∞ –µ–¥–Ω–æ —è–≤–ª–µ–Ω–∏–µ –≤ –∫–≤–∞–Ω—Ç–æ–≤–∞—Ç–∞ —Ñ–∏–∑–∏–∫–∞, –∫–æ–µ—Ç–æ –ø—Ä–µ–∑ 1935 –≥. –º—É –¥–æ–∫–∞—Ä–∞–ª–æ —É–∂–∞—Å.
–°—Ç–∞–≤–∞ –¥—É–º–∞ –∑–∞ –∫–≤–∞–Ω—Ç–æ–≤–æ—Ç–æ –∑–∞–ø–ª–∏—Ç–∞–Ω–µ, —á–∏—è—Ç–æ –æ—Å–æ–±–µ–Ω–æ—Å—Ç –µ, —á–µ –∫–æ–≥–∞—Ç–æ –∏–∑–º–µ—Ä–≤–∞—Ç–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –∑–∞ –µ–¥–Ω–∞ —á–∞—Å—Ç–∏—Ü–∞, –≤–µ–¥–Ω–∞–≥–∞ –≤—ä–∑–¥–µ–π—Å—Ç–≤–∞—Ç–µ –≤—ä—Ä—Ö—É –¥—Ä—É–≥–∞ —á–∞—Å—Ç–∏—Ü–∞, –¥–æ—Ä–∏ –∞–∫–æ —Ç–µ —Å–∞ –Ω–∞ –º–∏–ª–∏–æ–Ω–∏ —Å–≤–µ—Ç–ª–∏–Ω–Ω–∏ –≥–æ–¥–∏–Ω–∏ –µ–¥–Ω–∞ –æ—Ç –¥—Ä—É–≥–∞.
–∫–æ–µ—Ç–æ –ø—Ä–∏–≤–∏–¥–Ω–æ –Ω–∞—Ä—É—à–∞–≤–∞ —Ñ—É–Ω–¥–∞–º–µ–Ω—Ç–∞–ª–Ω–∏—è –∑–∞–∫–æ–Ω –Ω–∞ –í—Å–µ–ª–µ–Ω–∞—Ç–∞, —Å–ø–æ—Ä–µ–¥ –∫–æ–π—Ç–æ –Ω–∏—â–æ –Ω–µ –º–æ–∂–µ –¥–∞ —Å–µ –¥–≤–∏–∂–∏ –ø–æ-–±—ä—Ä–∑–æ –æ—Ç —Å–≤–µ—Ç–ª–∏–Ω–∞—Ç–∞.

–í —Å–≤–µ—Ç–∞ –Ω–∞ —Å–æ—Ñ—Ç—É–µ—Ä–∞ –º–æ–∂–µ–º –¥–∞ –Ω–∞—Ä–µ—á–µ–º "spooky action at a distance" —Å–∏—Ç—É–∞—Ü–∏—è, –ø—Ä–∏ –∫–æ—è—Ç–æ —Å—Ç–∞—Ä—Ç–∏—Ä–∞–º–µ –ø—Ä–æ—Ü–µ—Å, –∫–æ–π—Ç–æ —Å–º—è—Ç–∞–º–µ –∑–∞ –∏–∑–æ–ª–∏—Ä–∞–Ω (–∑–∞—â–æ—Ç–æ –Ω–µ —Å–º–µ –º—É –ø—Ä–µ–¥–∞–ª–∏ –Ω–∏–∫–∞–∫–≤–∏ —Ä–µ—Ñ–µ—Ä–µ–Ω—Ü–∏–∏), –Ω–æ –≤ –æ—Ç–¥–∞–ª–µ—á–µ–Ω–∏ –º–µ—Å—Ç–∞ –Ω–∞ —Å–∏—Å—Ç–µ–º–∞—Ç–∞ —Å–µ —Å–ª—É—á–≤–∞—Ç –Ω–µ–æ—á–∞–∫–≤–∞–Ω–∏ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è –∏ –ø—Ä–æ–º–µ–Ω–∏ –≤ —Å—ä—Å—Ç–æ—è–Ω–∏–µ—Ç–æ, –∑–∞ –∫–æ–∏—Ç–æ –Ω–µ —Å–º–µ –∫–∞–∑–∞–ª–∏ –Ω–∞ –æ–±–µ–∫—Ç–∞. –¢–æ–≤–∞ –º–æ–∂–µ –¥–∞ —Å–µ —Å–ª—É—á–∏ —Å–∞–º–æ —á—Ä–µ–∑ –≥–ª–æ–±–∞–ª–Ω–æ—Ç–æ —Å—ä—Å—Ç–æ—è–Ω–∏–µ.

–ü—Ä–µ–¥—Å—Ç–∞–≤–µ—Ç–µ —Å–∏, —á–µ —Å–µ –ø—Ä–∏—Å—ä–µ–¥–∏–Ω–∏—Ç–µ –∫—ä–º –µ–∫–∏–ø –∑–∞ —Ä–∞–∑—Ä–∞–±–æ—Ç–≤–∞–Ω–µ –Ω–∞ –ø—Ä–æ–µ–∫—Ç, –∫–æ–π—Ç–æ –∏–º–∞ –≥–æ–ª—è–º–∞, –∑—Ä—è–ª–∞ –±–∞–∑–∞ –æ—Ç –∫–æ–¥–æ–≤–µ. –ù–æ–≤–∏—è—Ç –≤–∏ —Ä—ä–∫–æ–≤–æ–¥–∏—Ç–µ–ª –≤–∏ –º–æ–ª–∏ –¥–∞ —Ä–µ–∞–ª–∏–∑–∏—Ä–∞—Ç–µ –Ω–æ–≤–∞ —Ñ—É–Ω–∫—Ü–∏—è –∏ –∫–∞—Ç–æ –¥–æ–±—ä—Ä —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫ –∑–∞–ø–æ—á–≤–∞—Ç–µ —Å –Ω–∞–ø–∏—Å–≤–∞–Ω–µ—Ç–æ –Ω–∞ —Ç–µ—Å—Ç. –ù–æ —Ç—ä–π –∫–∞—Ç–æ —Å—Ç–µ –Ω–æ–≤ –≤ –ø—Ä–æ–µ–∫—Ç–∞, –ø—Ä–∞–≤–∏—Ç–µ –º–Ω–æ–≥–æ –ø—Ä–æ—É—á–≤–∞—Ç–µ–ª–Ω–∏ —Ç–µ—Å—Ç–æ–≤–µ –æ—Ç —Ç–∏–ø–∞ "–∫–∞–∫–≤–æ —â–µ —Å—Ç–∞–Ω–µ, –∞–∫–æ –∏–∑–≤–∏–∫–∞–º —Ç–æ–∑–∏ –º–µ—Ç–æ–¥". –ò —Å–µ –æ–ø–∏—Ç–≤–∞—Ç–µ –¥–∞ –Ω–∞–ø–∏—à–µ—Ç–µ —Å–ª–µ–¥–Ω–∏—è —Ç–µ—Å—Ç:

```php
function testCreditCardCharge()
{
	$cc = new CreditCard('1234567890123456', 5, 2028); // –Ω–æ–º–µ—Ä–∞ –Ω–∞ –∫–∞—Ä—Ç–∞—Ç–∞ –≤–∏.
	$cc->charge(100);
}
```

–ò–∑–ø—ä–ª–Ω—è–≤–∞—Ç–µ –∫–æ–¥–∞, –º–æ–∂–µ –±–∏ –Ω—è–∫–æ–ª–∫–æ –ø—ä—Ç–∏, –∏ —Å–ª–µ–¥ –∏–∑–≤–µ—Å—Ç–Ω–æ –≤—Ä–µ–º–µ –∑–∞–±–µ–ª—è–∑–≤–∞—Ç–µ –Ω–∞ —Ç–µ–ª–µ—Ñ–æ–Ω–∞ —Å–∏ –∏–∑–≤–µ—Å—Ç–∏—è –æ—Ç –±–∞–Ω–∫–∞—Ç–∞, —á–µ –≤—Å–µ–∫–∏ –ø—ä—Ç, –∫–æ–≥–∞—Ç–æ –≥–æ –∏–∑–ø—ä–ª–Ω—è–≤–∞—Ç–µ, –æ—Ç –∫—Ä–µ–¥–∏—Ç–Ω–∞—Ç–∞ –≤–∏ –∫–∞—Ä—Ç–∞ —Å–∞ –±–∏–ª–∏ –∏–∑—Ç–µ–≥–ª–µ–Ω–∏ 100 –¥–æ–ª–∞—Ä–∞ ü§¶‚Äç‚ôÇÔ∏è

–ö–∞–∫, –∑–∞ –ë–æ–≥–∞, —Ç–µ—Å—Ç—ä—Ç –±–∏ –º–æ–≥—ä–ª –¥–∞ –ø—Ä–µ–¥–∏–∑–≤–∏–∫–∞ –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª–Ω–æ —Ç–∞–∫—Å—É–≤–∞–Ω–µ? –ù–µ –µ –ª–µ—Å–Ω–æ –¥–∞ —Å–µ –æ–ø–µ—Ä–∏—Ä–∞ —Å –∫—Ä–µ–¥–∏—Ç–Ω–∞ –∫–∞—Ä—Ç–∞. –¢—Ä—è–±–≤–∞ –¥–∞ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∞—Ç–µ —Å —É–µ–± —É—Å–ª—É–≥–∞ –Ω–∞ —Ç—Ä–µ—Ç–∞ —Å—Ç—Ä–∞–Ω–∞, —Ç—Ä—è–±–≤–∞ –¥–∞ –∑–Ω–∞–µ—Ç–µ URL –∞–¥—Ä–µ—Å–∞ –Ω–∞ —Ç–∞–∑–∏ —É–µ–± —É—Å–ª—É–≥–∞, —Ç—Ä—è–±–≤–∞ –¥–∞ –≤–ª–µ–∑–µ—Ç–µ –≤ —Å–∏—Å—Ç–µ–º–∞—Ç–∞ –∏ —Ç.–Ω.
–ù–∏—Ç–æ –µ–¥–Ω–∞ –æ—Ç —Ç–µ–∑–∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –Ω–µ –µ –≤–∫–ª—é—á–µ–Ω–∞ –≤ —Ç–µ—Å—Ç–∞. –û—â–µ –ø–æ-–ª–æ—à–æ, –¥–æ—Ä–∏ –Ω–µ –∑–Ω–∞–µ—Ç–µ –∫—ä–¥–µ –ø—Ä–∏—Å—ä—Å—Ç–≤–∞ —Ç–∞–∑–∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –∏ —Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª–Ω–æ –∫–∞–∫ –¥–∞ –∏–∑–¥–µ–∫–ª–∞–º–∏—Ä–∞—Ç–µ –≤—ä–Ω—à–Ω–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏, —Ç–∞–∫–∞ —á–µ –≤—Å—è–∫–æ –∏–∑–ø—ä–ª–Ω–µ–Ω–∏–µ –¥–∞ –Ω–µ –≤–æ–¥–∏ –¥–æ –ø–æ–≤—Ç–æ—Ä–Ω–æ —Ç–∞–∫—Å—É–≤–∞–Ω–µ –Ω–∞ 100 USD. –ê –∫–∞—Ç–æ –Ω–æ–≤ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫ –æ—Ç–∫—ä–¥–µ —Ç—Ä—è–±–≤–∞—à–µ –¥–∞ –∑–Ω–∞–µ—Ç–µ, —á–µ —Ç–æ–≤–∞, –∫–æ–µ—Ç–æ —â–µ –Ω–∞–ø—Ä–∞–≤–∏—Ç–µ, —â–µ –¥–æ–≤–µ–¥–µ –¥–æ –æ–±–µ–¥–Ω—è–≤–∞–Ω–µ—Ç–æ –≤–∏ —Å—ä—Å 100 –¥–æ–ª–∞—Ä–∞?

–¢–æ–≤–∞ –µ –ø—Ä–∏–∑—Ä–∞—á–Ω–æ –¥–µ–π—Å—Ç–≤–∏–µ –æ—Ç —Ä–∞–∑—Å—Ç–æ—è–Ω–∏–µ!

–ù–µ –≤–∏ –æ—Å—Ç–∞–≤–∞ –Ω–∏—â–æ –¥—Ä—É–≥–æ, –æ—Å–≤–µ–Ω –¥–∞ —Å–µ —Ä–æ–≤–∏—Ç–µ –≤ –º–Ω–æ–≥–æ –∏–∑—Ö–æ–¥–µ–Ω –∫–æ–¥, –¥–∞ –ø–∏—Ç–∞—Ç–µ –ø–æ-–≤—ä–∑—Ä–∞—Å—Ç–Ω–∏ –∏ –ø–æ-–æ–ø–∏—Ç–Ω–∏ –∫–æ–ª–µ–≥–∏, –¥–æ–∫–∞—Ç–æ —Ä–∞–∑–±–µ—Ä–µ—Ç–µ –∫–∞–∫ —Ä–∞–±–æ—Ç—è—Ç –≤—Ä—ä–∑–∫–∏—Ç–µ –≤ –ø—Ä–æ–µ–∫—Ç–∞.
–¢–æ–≤–∞ —Å–µ –¥—ä–ª–∂–∏ –Ω–∞ —Ñ–∞–∫—Ç–∞, —á–µ –∫–æ–≥–∞—Ç–æ —Ä–∞–∑–≥–ª–µ–∂–¥–∞—Ç–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ –Ω–∞ –∫–ª–∞—Å–∞ `CreditCard`, –Ω–µ –º–æ–∂–µ—Ç–µ –¥–∞ –æ–ø—Ä–µ–¥–µ–ª–∏—Ç–µ –≥–ª–æ–±–∞–ª–Ω–æ—Ç–æ —Å—ä—Å—Ç–æ—è–Ω–∏–µ, –∫–æ–µ—Ç–æ —Ç—Ä—è–±–≤–∞ –¥–∞ –±—ä–¥–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–∞–Ω–æ. –î–æ—Ä–∏ —Ä–∞–∑–≥–ª–µ–∂–¥–∞–Ω–µ—Ç–æ –Ω–∞ –∏–∑—Ö–æ–¥–Ω–∏—è –∫–æ–¥ –Ω–∞ –∫–ª–∞—Å–∞ –Ω—è–º–∞ –¥–∞ –≤–∏ –ø–æ–¥—Å–∫–∞–∂–µ –∫–æ–π –º–µ—Ç–æ–¥ –∑–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –¥–∞ –∏–∑–≤–∏–∫–∞—Ç–µ. –í –Ω–∞–π-–¥–æ–±—Ä–∏—è —Å–ª—É—á–∞–π –º–æ–∂–µ—Ç–µ –¥–∞ –Ω–∞–º–µ—Ä–∏—Ç–µ –≥–ª–æ–±–∞–ª–Ω–∞—Ç–∞ –ø—Ä–æ–º–µ–Ω–ª–∏–≤–∞, –¥–æ –∫–æ—è—Ç–æ —Å–µ –æ—Å—ä—â–µ—Å—Ç–≤—è–≤–∞ –¥–æ—Å—Ç—ä–ø, –∏ –¥–∞ —Å–µ –æ–ø–∏—Ç–∞—Ç–µ –¥–∞ –ø—Ä–µ–¥–ø–æ–ª–æ–∂–∏—Ç–µ –∫–∞–∫ –¥–∞ —è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–∞—Ç–µ –æ—Ç –Ω–µ—è.

–ö–ª–∞—Å–æ–≤–µ—Ç–µ –≤ —Ç–∞–∫—ä–≤ –ø—Ä–æ–µ–∫—Ç —Å–∞ –ø–∞—Ç–æ–ª–æ–≥–∏—á–Ω–∏ –ª—ä–∂—Ü–∏. –ü–ª–∞—Ç–µ–∂–Ω–∞—Ç–∞ –∫–∞—Ä—Ç–∞ —Å–µ –ø—Ä–µ—Å—Ç—Ä—É–≤–∞, —á–µ –º–æ–∂–µ—Ç–µ –ø—Ä–æ—Å—Ç–æ –¥–∞ —è –∏–Ω—Å—Ç–∞–Ω—Ü–∏—Ä–∞—Ç–µ –∏ –¥–∞ –∏–∑–≤–∏–∫–∞—Ç–µ –º–µ—Ç–æ–¥–∞ `charge()`. –¢—è –æ–±–∞—á–µ —Ç–∞–π–Ω–æ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∞ —Å –¥—Ä—É–≥ –∫–ª–∞—Å, `PaymentGateway`. –î–æ—Ä–∏ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ä—Ç –º—É –∫–∞–∑–≤–∞, —á–µ –º–æ–∂–µ –¥–∞ –±—ä–¥–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–∞–Ω —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª–Ω–æ, –Ω–æ –≤ –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª–Ω–æ—Å—Ç —Ç–æ–π —Ç–µ–≥–ª–∏ –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–æ–Ω–Ω–∏ –¥–∞–Ω–Ω–∏ –æ—Ç –Ω—è–∫–∞–∫—ä–≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–µ–Ω —Ñ–∞–π–ª –∏ —Ç–∞–∫–∞ –Ω–∞—Ç–∞—Ç—ä–∫.
–ó–∞ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏—Ü–∏—Ç–µ, –∫–æ–∏—Ç–æ —Å–∞ –Ω–∞–ø–∏—Å–∞–ª–∏ —Ç–æ–∑–∏ –∫–æ–¥, –µ —è—Å–Ω–æ, —á–µ `CreditCard` —Å–µ –Ω—É–∂–¥–∞–µ –æ—Ç `PaymentGateway`. –¢–µ —Å–∞ –Ω–∞–ø–∏—Å–∞–ª–∏ –∫–æ–¥–∞ –ø–æ —Ç–æ–∑–∏ –Ω–∞—á–∏–Ω. –ù–æ –∑–∞ –≤—Å–µ–∫–∏, –∫–æ–π—Ç–æ –µ –Ω–æ–≤ –≤ –ø—Ä–æ–µ–∫—Ç–∞, —Ç–æ–≤–∞ –µ –ø—ä–ª–Ω–∞ –∑–∞–≥–∞–¥–∫–∞ –∏ –ø—Ä–µ—á–∏ –Ω–∞ –æ–±—É—á–µ–Ω–∏–µ—Ç–æ.

–ö–∞–∫ –¥–∞ –ø–æ–ø—Ä–∞–≤–∏–º —Å–∏—Ç—É–∞—Ü–∏—è—Ç–∞? –õ–µ—Å–Ω–æ. **–î–∞–π—Ç–µ –≤—ä–∑–º–æ–∂–Ω–æ—Å—Ç –Ω–∞ API –¥–∞ –¥–µ–∫–ª–∞—Ä–∏—Ä–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏—Ç–µ.**

```php
function testCreditCardCharge()
{
	$gateway = new PaymentGateway(/* ... */);
	$cc = new CreditCard('1234567890123456', 5, 2028);
	$cc->charge($gateway, 100);
}
```

–ó–∞–±–µ–ª–µ–∂–µ—Ç–µ –∫–∞–∫ –≤—Ä—ä–∑–∫–∏—Ç–µ –≤ –∫–æ–¥–∞ –∏–∑–≤–µ–¥–Ω—ä–∂ —Å—Ç–∞–≤–∞—Ç –æ—á–µ–≤–∏–¥–Ω–∏. –ö–∞—Ç–æ –¥–µ–∫–ª–∞—Ä–∏—Ä–∞—Ç–µ, —á–µ –º–µ—Ç–æ–¥—ä—Ç `charge()` —Å–µ –Ω—É–∂–¥–∞–µ –æ—Ç `PaymentGateway`, –Ω–µ –µ –Ω—É–∂–Ω–æ –¥–∞ –ø–∏—Ç–∞—Ç–µ –Ω–∏–∫–æ–≥–æ –∫–∞–∫ –∫–æ–¥—ä—Ç –µ –≤–∑–∞–∏–º–æ–∑–∞–≤–∏—Å–∏–º. –ó–Ω–∞–µ—Ç–µ, —á–µ —Ç—Ä—è–±–≤–∞ –¥–∞ —Å—ä–∑–¥–∞–¥–µ—Ç–µ –Ω–µ–≥–æ–≤–∞ –∏–Ω—Å—Ç–∞–Ω—Ü–∏—è, –∞ –∫–æ–≥–∞—Ç–æ —Å–µ –æ–ø–∏—Ç–∞—Ç–µ –¥–∞ –≥–æ –Ω–∞–ø—Ä–∞–≤–∏—Ç–µ, —Å–µ —Å–±–ª—ä—Å–∫–≤–∞—Ç–µ —Å —Ñ–∞–∫—Ç–∞, —á–µ —Ç—Ä—è–±–≤–∞ –¥–∞ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–∏—Ç–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–∏ –∑–∞ –¥–æ—Å—Ç—ä–ø. –ë–µ–∑ —Ç—è—Ö –∫–æ–¥—ä—Ç –¥–æ—Ä–∏ –Ω–µ –±–∏ –º–æ–≥—ä–ª –¥–∞ —Å–µ –∏–∑–ø—ä–ª–Ω–∏.

–ò –Ω–∞–π-–≤–∞–∂–Ω–æ—Ç–æ, —Å–µ–≥–∞ –º–æ–∂–µ—Ç–µ –¥–∞ –∏–∑–¥–µ–∫–ª–∞–º–∏—Ä–∞—Ç–µ —à–ª—é–∑–∞ –∑–∞ –ø–ª–∞—â–∞–Ω–µ, —Ç–∞–∫–∞ —á–µ –¥–∞ –Ω–µ –≤–∏ —Ç–∞–∫—Å—É–≤–∞—Ç –ø–æ 100 –¥–æ–ª–∞—Ä–∞ –≤—Å–µ–∫–∏ –ø—ä—Ç, –∫–æ–≥–∞—Ç–æ —Å—Ç–∞—Ä—Ç–∏—Ä–∞—Ç–µ —Ç–µ—Å—Ç.

–ì–ª–æ–±–∞–ª–Ω–æ—Ç–æ —Å—ä—Å—Ç–æ—è–Ω–∏–µ –∫–∞—Ä–∞ –æ–±–µ–∫—Ç–∏—Ç–µ –≤–∏ –¥–∞ –º–æ–≥–∞—Ç —Ç–∞–π–Ω–æ –¥–∞ –ø–æ–ª—É—á–∞–≤–∞—Ç –¥–æ—Å—Ç—ä–ø –¥–æ –Ω–µ—â–∞, –∫–æ–∏—Ç–æ –Ω–µ —Å–∞ –¥–µ–∫–ª–∞—Ä–∏—Ä–∞–Ω–∏ –≤ —Ç–µ—Ö–Ω–∏—Ç–µ API, –∏ –≤ —Ä–µ–∑—É–ª—Ç–∞—Ç –Ω–∞ —Ç–æ–≤–∞ –ø—Ä–∞–≤–∏ API-—Ç–∞—Ç–∞ –≤–∏ –ø–∞—Ç–æ–ª–æ–≥–∏—á–Ω–∏ –ª—ä–∂—Ü–∏.

–ú–æ–∂–µ –∏ –¥–∞ –Ω–µ —Å—Ç–µ –≥–æ –º–∏—Å–ª–∏–ª–∏ –ø–æ —Ç–æ–∑–∏ –Ω–∞—á–∏–Ω –ø—Ä–µ–¥–∏, –Ω–æ –≤–∏–Ω–∞–≥–∏ –∫–æ–≥–∞—Ç–æ –∏–∑–ø–æ–ª–∑–≤–∞—Ç–µ –≥–ª–æ–±–∞–ª–Ω–æ —Å—ä—Å—Ç–æ—è–Ω–∏–µ, —Å—ä–∑–¥–∞–≤–∞—Ç–µ —Ç–∞–π–Ω–∏ –±–µ–∑–∂–∏—á–Ω–∏ –∫–∞–Ω–∞–ª–∏ –∑–∞ –∫–æ–º—É–Ω–∏–∫–∞—Ü–∏—è. –°—Ç—Ä–∞—Ö–æ–≤–∏—Ç–æ—Ç–æ –æ—Ç–¥–∞–ª–µ—á–µ–Ω–æ –¥–µ–π—Å—Ç–≤–∏–µ –ø—Ä–∏–Ω—É–∂–¥–∞–≤–∞ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏—Ü–∏—Ç–µ –¥–∞ —á–µ—Ç–∞—Ç –≤—Å–µ–∫–∏ —Ä–µ–¥ –∫–æ–¥, –∑–∞ –¥–∞ —Ä–∞–∑–±–µ—Ä–∞—Ç –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª–Ω–∏—Ç–µ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è, –Ω–∞–º–∞–ª—è–≤–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª–Ω–æ—Å—Ç—Ç–∞ –Ω–∞ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏—Ü–∏—Ç–µ –∏ –æ–±—ä—Ä–∫–≤–∞ –Ω–æ–≤–∏—Ç–µ —á–ª–µ–Ω–æ–≤–µ –Ω–∞ –µ–∫–∏–ø–∞.
–ê–∫–æ –≤–∏–µ —Å—Ç–µ —Ç–æ–∑–∏, –∫–æ–π—Ç–æ –µ —Å—ä–∑–¥–∞–ª –∫–æ–¥–∞, –∑–Ω–∞–µ—Ç–µ –∏—Å—Ç–∏–Ω—Å–∫–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏, –Ω–æ –≤—Å–µ–∫–∏, –∫–æ–π—Ç–æ –∏–¥–≤–∞ —Å–ª–µ–¥ –≤–∞—Å, –µ –±–µ–∑–ø–æ–º–æ—â–µ–Ω.

–ù–µ –ø–∏—à–µ—Ç–µ –∫–æ–¥, –∫–æ–π—Ç–æ –∏–∑–ø–æ–ª–∑–≤–∞ –≥–ª–æ–±–∞–ª–Ω–æ —Å—ä—Å—Ç–æ—è–Ω–∏–µ, –∞ –ø—Ä–µ–¥–ø–æ—á–∏—Ç–∞–π—Ç–µ –¥–∞ –ø—Ä–µ–¥–∞–≤–∞—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏. –¢–æ–≤–∞ –µ –∏–Ω–∂–µ–∫—Ç–∏—Ä–∞–Ω–µ –Ω–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏.


–ö—Ä–µ—Ö–∫–æ—Å—Ç—Ç–∞ –Ω–∞ –≥–ª–æ–±–∞–ª–Ω–∞—Ç–∞ –¥—ä—Ä–∂–∞–≤–∞ .[#toc-brittleness-of-the-global-state]
------------------------------------------------------------------------

–í –∫–æ–¥, –∫–æ–π—Ç–æ –∏–∑–ø–æ–ª–∑–≤–∞ –≥–ª–æ–±–∞–ª–Ω–æ —Å—ä—Å—Ç–æ—è–Ω–∏–µ –∏ –µ–¥–∏–Ω–∏—á–Ω–∏ –µ–ª–µ–º–µ–Ω—Ç–∏, –Ω–∏–∫–æ–≥–∞ –Ω–µ –µ —Å–∏–≥—É—Ä–Ω–æ –∫–æ–≥–∞ –∏ –æ—Ç –∫–æ–≥–æ –µ –ø—Ä–æ–º–µ–Ω–µ–Ω–æ —Ç–æ–≤–∞ —Å—ä—Å—Ç–æ—è–Ω–∏–µ. –¢–æ–∑–∏ —Ä–∏—Å–∫ –µ –Ω–∞–ª–∏—Ü–µ –æ—â–µ –ø—Ä–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è—Ç–∞. –°–ª–µ–¥–≤–∞—â–∏—è—Ç –∫–æ–¥ —Ç—Ä—è–±–≤–∞ –¥–∞ —Å—ä–∑–¥–∞–¥–µ –≤—Ä—ä–∑–∫–∞ —Å –±–∞–∑–∞ –¥–∞–Ω–Ω–∏ –∏ –¥–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–∞ —à–ª—é–∑–∞ –∑–∞ –ø–ª–∞—â–∞–Ω–∏—è, –Ω–æ –ø—Ä–æ–¥—ä–ª–∂–∞–≤–∞ –¥–∞ —Ö–≤—ä—Ä–ª—è –∏–∑–∫–ª—é—á–µ–Ω–∏–µ –∏ –Ω–∞–º–∏—Ä–∞–Ω–µ—Ç–æ –Ω–∞ –ø—Ä–∏—á–∏–Ω–∞—Ç–∞ –µ –∏–∑–∫–ª—é—á–∏—Ç–µ–ª–Ω–æ —Ç—Ä—É–¥–æ–µ–º–∫–æ:

```php
PaymentGateway::init();
DB::init('mysql:', 'user', 'password');
```

–¢—Ä—è–±–≤–∞ –¥–∞ –ø—Ä–µ–≥–ª–µ–¥–∞—Ç–µ –ø–æ–¥—Ä–æ–±–Ω–æ –∫–æ–¥–∞, –∑–∞ –¥–∞ –æ—Ç–∫—Ä–∏–µ—Ç–µ, —á–µ –æ–±–µ–∫—Ç—ä—Ç `PaymentGateway` –æ—Å—ä—â–µ—Å—Ç–≤—è–≤–∞ –±–µ–∑–∂–∏—á–µ–Ω –¥–æ—Å—Ç—ä–ø –¥–æ –¥—Ä—É–≥–∏ –æ–±–µ–∫—Ç–∏, –Ω—è–∫–æ–∏ –æ—Ç –∫–æ–∏—Ç–æ –∏–∑–∏—Å–∫–≤–∞—Ç –≤—Ä—ä–∑–∫–∞ —Å –±–∞–∑–∞ –¥–∞–Ω–Ω–∏. –ü–æ —Ç–æ–∑–∏ –Ω–∞—á–∏–Ω —Ç—Ä—è–±–≤–∞ –¥–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–∞—Ç–µ –±–∞–∑–∞—Ç–∞ –¥–∞–Ω–Ω–∏, –ø—Ä–µ–¥–∏ `PaymentGateway`. –î–∏–º–Ω–∞—Ç–∞ –∑–∞–≤–µ—Å–∞ –Ω–∞ –≥–ª–æ–±–∞–ª–Ω–æ—Ç–æ —Å—ä—Å—Ç–æ—è–Ω–∏–µ –æ–±–∞—á–µ —Å–∫—Ä–∏–≤–∞ —Ç–æ–≤–∞ –æ—Ç –≤–∞—Å. –ö–æ–ª–∫–æ –≤—Ä–µ–º–µ –±–∏—Ö—Ç–µ —Å–ø–µ—Å—Ç–∏–ª–∏, –∞–∫–æ API –Ω–∞ –≤—Å–µ–∫–∏ –∫–ª–∞—Å –Ω–µ –ª—ä–∂–µ –∏ –Ω–µ –¥–µ–∫–ª–∞—Ä–∏—Ä–∞ —Å–≤–æ–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏?

```php
$db = new DB('mysql:', 'user', 'password');
$gateway = new PaymentGateway($db, ...);
```

–ü–æ–¥–æ–±–µ–Ω –ø—Ä–æ–±–ª–µ–º –≤—ä–∑–Ω–∏–∫–≤–∞, –∫–æ–≥–∞—Ç–æ –∏–∑–ø–æ–ª–∑–≤–∞—Ç–µ –≥–ª–æ–±–∞–ª–µ–Ω –¥–æ—Å—Ç—ä–ø –¥–æ –≤—Ä—ä–∑–∫–∞ —Å –±–∞–∑–∞ –¥–∞–Ω–Ω–∏:

```php
use Illuminate\Support\Facades\DB;

class Article
{
	public function save(): void
	{
		DB::insert(/* ... */);
	}
}
```

–ö–æ–≥–∞—Ç–æ —Å–µ –∏–∑–≤–∏–∫–≤–∞ –º–µ—Ç–æ–¥—ä—Ç `save()`, –Ω–µ –µ —Å–∏–≥—É—Ä–Ω–æ –¥–∞–ª–∏ –≤–µ—á–µ –µ —Å—ä–∑–¥–∞–¥–µ–Ω–∞ –≤—Ä—ä–∑–∫–∞ –∫—ä–º –±–∞–∑–∞—Ç–∞ –¥–∞–Ω–Ω–∏ –∏ –∫–æ–π –µ –æ—Ç–≥–æ–≤–æ—Ä–µ–Ω –∑–∞ —Å—ä–∑–¥–∞–≤–∞–Ω–µ—Ç–æ —ù. –ù–∞–ø—Ä–∏–º–µ—Ä, –∞–∫–æ –∏—Å–∫–∞–º–µ –¥–∞ –ø—Ä–æ–º–µ–Ω–∏–º –≤—Ä—ä–∑–∫–∞—Ç–∞ —Å –±–∞–∑–∞—Ç–∞ –¥–∞–Ω–Ω–∏ –≤ –¥–≤–∏–∂–µ–Ω–∏–µ, –º–æ–∂–µ –±–∏ –∑–∞ —Ü–µ–ª–∏—Ç–µ –Ω–∞ —Ç–µ—Å—Ç–≤–∞–Ω–µ—Ç–æ, –≤–µ—Ä–æ—è—Ç–Ω–æ —â–µ —Ç—Ä—è–±–≤–∞ –¥–∞ —Å—ä–∑–¥–∞–¥–µ–º –¥–æ–ø—ä–ª–Ω–∏—Ç–µ–ª–Ω–∏ –º–µ—Ç–æ–¥–∏ –∫–∞—Ç–æ `DB::reconnect(...)` –∏–ª–∏ `DB::reconnectForTest()`.

–†–∞–∑–≥–ª–µ–¥–∞–π—Ç–µ –µ–¥–∏–Ω –ø—Ä–∏–º–µ—Ä:

```php
$article = new Article;
// ...
DB::reconnectForTest();
Foo::doSomething();
$article->save();
```

–û—Ç–∫—ä–¥–µ –º–æ–∂–µ–º –¥–∞ —Å–º–µ —Å–∏–≥—É—Ä–Ω–∏, —á–µ —Ç–µ—Å—Ç–æ–≤–∞—Ç–∞ –±–∞–∑–∞ –¥–∞–Ω–Ω–∏ –Ω–∞–∏—Å—Ç–∏–Ω–∞ —Å–µ –∏–∑–ø–æ–ª–∑–≤–∞ –ø—Ä–∏ –∏–∑–≤–∏–∫–≤–∞–Ω–µ—Ç–æ –Ω–∞ `$article->save()`? –ö–∞–∫–≤–æ —â–µ —Å—Ç–∞–Ω–µ, –∞–∫–æ –º–µ—Ç–æ–¥—ä—Ç `Foo::doSomething()` –ø—Ä–æ–º–µ–Ω–∏ –≥–ª–æ–±–∞–ª–Ω–∞—Ç–∞ –≤—Ä—ä–∑–∫–∞ –∫—ä–º –±–∞–∑–∞—Ç–∞ –¥–∞–Ω–Ω–∏? –ó–∞ –¥–∞ —Ä–∞–∑–±–µ—Ä–µ–º —Ç–æ–≤–∞, —â–µ —Ç—Ä—è–±–≤–∞ –¥–∞ —Ä–∞–∑–≥–ª–µ–¥–∞–º–µ –∏–∑—Ö–æ–¥–Ω–∏—è –∫–æ–¥ –Ω–∞ –∫–ª–∞—Å–∞ `Foo` –∏ –≤–µ—Ä–æ—è—Ç–Ω–æ –Ω–∞ –º–Ω–æ–≥–æ –¥—Ä—É–≥–∏ –∫–ª–∞—Å–æ–≤–µ. –¢–æ–∑–∏ –ø–æ–¥—Ö–æ–¥ –æ–±–∞—á–µ –±–∏ –¥–∞–ª —Å–∞–º–æ –∫—Ä–∞—Ç–∫–æ—Å—Ä–æ—á–µ–Ω –æ—Ç–≥–æ–≤–æ—Ä, —Ç—ä–π –∫–∞—Ç–æ —Å–∏—Ç—É–∞—Ü–∏—è—Ç–∞ –º–æ–∂–µ –¥–∞ —Å–µ –ø—Ä–æ–º–µ–Ω–∏ –≤ –±—ä–¥–µ—â–µ.

–ö–∞–∫–≤–æ —â–µ —Å—Ç–∞–Ω–µ, –∞–∫–æ –ø—Ä–µ–º–µ—Å—Ç–∏–º –≤—Ä—ä–∑–∫–∞—Ç–∞ —Å –±–∞–∑–∞—Ç–∞ –¥–∞–Ω–Ω–∏ –≤ —Å—Ç–∞—Ç–∏—á–Ω–∞ –ø—Ä–æ–º–µ–Ω–ª–∏–≤–∞ –≤—ä—Ç—Ä–µ –≤ –∫–ª–∞—Å–∞ `Article`?

```php
class Article
{
	private static DB $db;

	public static function setDb(DB $db): void
	{
		self::$db = $db;
	}

	public function save(): void
	{
		self::$db->insert(/* ... */);
	}
}
```

–¢–æ–≤–∞ –∏–∑–æ–±—â–æ –Ω–µ –ø—Ä–æ–º–µ–Ω—è –Ω–∏—â–æ. –ü—Ä–æ–±–ª–µ–º—ä—Ç –µ –≥–ª–æ–±–∞–ª–Ω–æ —Å—ä—Å—Ç–æ—è–Ω–∏–µ –∏ –Ω—è–º–∞ –∑–Ω–∞—á–µ–Ω–∏–µ –≤ –∫–æ–π –∫–ª–∞—Å —Å–µ –∫—Ä–∏–µ. –í —Ç–æ–∑–∏ —Å–ª—É—á–∞–π, –∫–∞–∫—Ç–æ –∏ –≤ –ø—Ä–µ–¥–∏—à–Ω–∏—è, –Ω—è–º–∞–º–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–∞ –≤ –∫–æ—è –±–∞–∑–∞ –¥–∞–Ω–Ω–∏ —Å–µ –∑–∞–ø–∏—Å–≤–∞, –∫–æ–≥–∞—Ç–æ —Å–µ –∏–∑–≤–∏–∫–∞ –º–µ—Ç–æ–¥—ä—Ç `$article->save()`. –í—Å–µ–∫–∏, –∫–æ–π—Ç–æ —Å–µ –Ω–∞–º–∏—Ä–∞ –≤ –¥–∞–ª–µ—á–Ω–∏—è –∫—Ä–∞–π –Ω–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ—Ç–æ, –º–æ–∂–µ –¥–∞ –ø—Ä–æ–º–µ–Ω–∏ –±–∞–∑–∞—Ç–∞ –¥–∞–Ω–Ω–∏ –ø–æ –≤—Å—è–∫–æ –≤—Ä–µ–º–µ, –∫–∞—Ç–æ –∏–∑–ø–æ–ª–∑–≤–∞ `Article::setDb()`. –ü–æ–¥ –Ω–∞—à–∏—Ç–µ —Ä—ä—Ü–µ.

–ì–ª–æ–±–∞–ª–Ω–æ—Ç–æ —Å—ä—Å—Ç–æ—è–Ω–∏–µ –ø—Ä–∞–≤–∏ –Ω–∞—à–µ—Ç–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ **–∏–∑–∫–ª—é—á–∏—Ç–µ–ª–Ω–æ –∫—Ä–µ—Ö–∫–æ**.

–ò–º–∞ –æ–±–∞—á–µ –ø—Ä–æ—Å—Ç –Ω–∞—á–∏–Ω –¥–∞ —Å–µ —Å–ø—Ä–∞–≤–∏–º —Å —Ç–æ–∑–∏ –ø—Ä–æ–±–ª–µ–º. –ü—Ä–æ—Å—Ç–æ –Ω–∞–∫–∞—Ä–∞–π—Ç–µ API –¥–∞ –¥–µ–∫–ª–∞—Ä–∏—Ä–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏, –∑–∞ –¥–∞ —Å–µ –æ—Å–∏–≥—É—Ä–∏ –ø—Ä–∞–≤–∏–ª–Ω–∞ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–Ω–æ—Å—Ç.

```php
class Article
{
	public function __construct(
		private DB $db,
	) {
	}

	public function save(): void
	{
		$this->db->insert(/* ... */);
	}
}

$article = new Article($db);
// ...
Foo::doSomething();
$article->save();
```

–¢–æ–∑–∏ –ø–æ–¥—Ö–æ–¥ –µ–ª–∏–º–∏–Ω–∏—Ä–∞ –ø—Ä–∏—Ç–µ—Å–Ω–µ–Ω–∏–µ—Ç–æ –æ—Ç —Å–∫—Ä–∏—Ç–∏ –∏ –Ω–µ–æ—á–∞–∫–≤–∞–Ω–∏ –ø—Ä–æ–º–µ–Ω–∏ –≤—ä–≤ –≤—Ä—ä–∑–∫–∏—Ç–µ —Å –±–∞–∑–∏ –¥–∞–Ω–Ω–∏. –°–µ–≥–∞ —Å–º–µ —Å–∏–≥—É—Ä–Ω–∏ –∫—ä–¥–µ —Å–µ —Å—ä—Ö—Ä–∞–Ω—è–≤–∞ —Å—Ç–∞—Ç–∏—è—Ç–∞ –∏ –Ω–∏–∫–∞–∫–≤–∏ –º–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏–∏ –Ω–∞ –∫–æ–¥–∞ –≤—ä—Ç—Ä–µ –≤ –¥—Ä—É–≥ –Ω–µ—Å–≤—ä—Ä–∑–∞–Ω –∫–ª–∞—Å –≤–µ—á–µ –Ω–µ –º–æ–≥–∞—Ç –¥–∞ –ø—Ä–æ–º–µ–Ω—è—Ç —Å–∏—Ç—É–∞—Ü–∏—è—Ç–∞. –ö–æ–¥—ä—Ç –≤–µ—á–µ –Ω–µ –µ –∫—Ä–µ—Ö—ä–∫, –∞ —Å—Ç–∞–±–∏–ª–µ–Ω.

–ù–µ –ø–∏—à–µ—Ç–µ –∫–æ–¥, –∫–æ–π—Ç–æ –∏–∑–ø–æ–ª–∑–≤–∞ –≥–ª–æ–±–∞–ª–Ω–æ —Å—ä—Å—Ç–æ—è–Ω–∏–µ, –∞ –ø—Ä–µ–¥–ø–æ—á–∏—Ç–∞–π—Ç–µ –¥–∞ –ø—Ä–µ–¥–∞–≤–∞—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏. –ü–æ —Ç–æ–∑–∏ –Ω–∞—á–∏–Ω —Å–µ –≤—ä–≤–µ–∂–¥–∞ –∏–Ω–∂–µ–∫—Ç–∏—Ä–∞–Ω–µ –Ω–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏.


Singleton .[#toc-singleton]
---------------------------

Singleton –µ —à–∞–±–ª–æ–Ω –∑–∞ –ø—Ä–æ–µ–∫—Ç–∏—Ä–∞–Ω–µ, –∫–æ–π—Ç–æ –ø–æ [–¥–µ—Ñ–∏–Ω–∏—Ü–∏—è –æ—Ç |https://en.wikipedia.org/wiki/Singleton_pattern] –∏–∑–≤–µ—Å—Ç–Ω–∞—Ç–∞ –ø—É–±–ª–∏–∫–∞—Ü–∏—è –Ω–∞ Gang of Four –æ–≥—Ä–∞–Ω–∏—á–∞–≤–∞ –∫–ª–∞—Å–∞ –¥–æ –µ–¥–∏–Ω –µ–∫–∑–µ–º–ø–ª—è—Ä –∏ –ø—Ä–µ–¥–ª–∞–≥–∞ –≥–ª–æ–±–∞–ª–µ–Ω –¥–æ—Å—Ç—ä–ø –¥–æ –Ω–µ–≥–æ. –†–µ–∞–ª–∏–∑–∞—Ü–∏—è—Ç–∞ –Ω–∞ —Ç–æ–∑–∏ —à–∞–±–ª–æ–Ω –æ–±–∏–∫–Ω–æ–≤–µ–Ω–æ –ø—Ä–∏–ª–∏—á–∞ –Ω–∞ —Å–ª–µ–¥–Ω–∏—è –∫–æ–¥:

```php
class Singleton
{
	private static self $instance;

	public static function getInstance(): self
	{
		self::$instance ??= new self;
		return self::$instance;
	}

	// –∏ –¥—Ä—É–≥–∏ –º–µ—Ç–æ–¥–∏, –∫–æ–∏—Ç–æ –∏–∑–ø—ä–ª–Ω—è–≤–∞—Ç —Ñ—É–Ω–∫—Ü–∏–∏—Ç–µ –Ω–∞ –∫–ª–∞—Å–∞.
}
```

–ó–∞ —Å—ä–∂–∞–ª–µ–Ω–∏–µ —Å–∏–Ω–≥—ä–ª—Ç–æ–Ω—ä—Ç –≤—ä–≤–µ–∂–¥–∞ –≥–ª–æ–±–∞–ª–Ω–æ —Å—ä—Å—Ç–æ—è–Ω–∏–µ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ—Ç–æ. –ê –∫–∞–∫—Ç–æ –ø–æ–∫–∞–∑–∞—Ö–º–µ –ø–æ-–≥–æ—Ä–µ, –≥–ª–æ–±–∞–ª–Ω–æ—Ç–æ —Å—ä—Å—Ç–æ—è–Ω–∏–µ –µ –Ω–µ–∂–µ–ª–∞—Ç–µ–ª–Ω–æ. –ï—Ç–æ –∑–∞—â–æ —Å–∏–Ω–≥—ä–ª—Ç–æ–Ω—ä—Ç —Å–µ —Å—á–∏—Ç–∞ –∑–∞ –∞–Ω—Ç–∏–º–æ–¥–µ–ª.

–ù–µ –∏–∑–ø–æ–ª–∑–≤–∞–π—Ç–µ —Å–∏–Ω–≥—ä–ª—Ç–æ–Ω–∏ –≤ –∫–æ–¥–∞ —Å–∏ –∏ –≥–∏ –∑–∞–º–µ–Ω–µ—Ç–µ —Å –¥—Ä—É–≥–∏ –º–µ—Ö–∞–Ω–∏–∑–º–∏. –ù–∞–∏—Å—Ç–∏–Ω–∞ –Ω–µ —Å–µ –Ω—É–∂–¥–∞–µ—Ç–µ –æ—Ç —Å–∏–Ω–≥–ª–µ—Ç–æ–Ω–∏. –ê–∫–æ –æ–±–∞—á–µ —Ç—Ä—è–±–≤–∞ –¥–∞ –≥–∞—Ä–∞–Ω—Ç–∏—Ä–∞—Ç–µ —Å—ä—â–µ—Å—Ç–≤—É–≤–∞–Ω–µ—Ç–æ –Ω–∞ –µ–¥–Ω–∞ –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–∞ –∏–Ω—Å—Ç–∞–Ω—Ü–∏—è –Ω–∞ –¥–∞–¥–µ–Ω –∫–ª–∞—Å –∑–∞ —Ü—è–ª–æ—Ç–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ, –æ—Å—Ç–∞–≤–µ—Ç–µ —Ç–æ–≤–∞ –Ω–∞ [DI –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ |container].
–ü–æ —Ç–æ–∑–∏ –Ω–∞—á–∏–Ω —Å—ä–∑–¥–∞–π—Ç–µ —Å–∏–Ω–≥–ª–µ—Ç–æ–Ω –Ω–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ—Ç–æ –∏–ª–∏ —É—Å–ª—É–≥–∞. –¢–æ–≤–∞ —â–µ –ø–æ–ø—Ä–µ—á–∏ –Ω–∞ –∫–ª–∞—Å–∞ –¥–∞ –æ—Å–∏–≥—É—Ä–∏ —Å–æ–±—Å—Ç–≤–µ–Ω–∞—Ç–∞ —Å–∏ —É–Ω–∏–∫–∞–ª–Ω–æ—Å—Ç (—Ç.–µ. —Ç–æ–π –Ω—è–º–∞ –¥–∞ –∏–º–∞ `getInstance()` –º–µ—Ç–æ–¥ –∏ —Å—Ç–∞—Ç–∏—á–Ω–∞ –ø—Ä–æ–º–µ–Ω–ª–∏–≤–∞) –∏ —â–µ –∏–∑–ø—ä–ª–Ω—è–≤–∞ —Å–∞–º–æ —Å–≤–æ–∏—Ç–µ —Ñ—É–Ω–∫—Ü–∏–∏. –ü–æ —Ç–æ–∑–∏ –Ω–∞—á–∏–Ω —Ç–æ–π —â–µ —Å–ø—Ä–µ –¥–∞ –Ω–∞—Ä—É—à–∞–≤–∞ –ø—Ä–∏–Ω—Ü–∏–ø–∞ –Ω–∞ –µ–¥–∏–Ω–∏—á–Ω–∞—Ç–∞ –æ—Ç–≥–æ–≤–æ—Ä–Ω–æ—Å—Ç.


–ì–ª–æ–±–∞–ª–Ω–æ —Å—ä—Å—Ç–æ—è–Ω–∏–µ —Å—Ä–µ—â—É —Ç–µ—Å—Ç–æ–≤–µ .[#toc-global-state-versus-tests]
------------------------------------------------------------------

–ö–æ–≥–∞—Ç–æ –ø–∏—à–µ–º —Ç–µ—Å—Ç–æ–≤–µ, –ø—Ä–∏–µ–º–∞–º–µ, —á–µ –≤—Å–µ–∫–∏ —Ç–µ—Å—Ç –µ –∏–∑–æ–ª–∏—Ä–∞–Ω–∞ –µ–¥–∏–Ω–∏—Ü–∞ –∏ —á–µ –≤ –Ω–µ–≥–æ –Ω–µ –≤–ª–∏–∑–∞ –Ω–∏–∫–∞–∫–≤–æ –≤—ä–Ω—à–Ω–æ —Å—ä—Å—Ç–æ—è–Ω–∏–µ. –ò –Ω–∏–∫–æ–µ —Å—ä—Å—Ç–æ—è–Ω–∏–µ –Ω–µ –Ω–∞–ø—É—Å–∫–∞ —Ç–µ—Å—Ç–æ–≤–µ—Ç–µ. –ö–æ–≥–∞—Ç–æ —Ç–µ—Å—Ç—ä—Ç –∑–∞–≤—ä—Ä—à–∏, –≤—Å—è–∫–æ —Å—ä—Å—Ç–æ—è–Ω–∏–µ, —Å–≤—ä—Ä–∑–∞–Ω–æ —Å –Ω–µ–≥–æ, —Ç—Ä—è–±–≤–∞ –¥–∞ –±—ä–¥–µ –ø—Ä–µ–º–∞—Ö–Ω–∞—Ç–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –æ—Ç garbage collector. –¢–æ–≤–∞ –ø—Ä–∞–≤–∏ —Ç–µ—Å—Ç–æ–≤–µ—Ç–µ –∏–∑–æ–ª–∏—Ä–∞–Ω–∏. –°–ª–µ–¥–æ–≤–∞—Ç–µ–ª–Ω–æ –º–æ–∂–µ–º –¥–∞ –∏–∑–ø—ä–ª–Ω—è–≤–∞–º–µ —Ç–µ—Å—Ç–æ–≤–µ—Ç–µ –≤ –ø—Ä–æ–∏–∑–≤–æ–ª–µ–Ω —Ä–µ–¥.

–ê–∫–æ –æ–±–∞—á–µ —Å–∞ –Ω–∞–ª–∏—Ü–µ –≥–ª–æ–±–∞–ª–Ω–∏ —Å—ä—Å—Ç–æ—è–Ω–∏—è/—Å–∏–Ω–≥–ª–µ—Ç–æ–Ω–∏, –≤—Å–∏—á–∫–∏ —Ç–µ–∑–∏ —Ö—É–±–∞–≤–∏ –ø—Ä–µ–¥–ø–æ–ª–æ–∂–µ–Ω–∏—è —Å–µ —Ä–∞–∑–≤–∞–ª—è—Ç. –ï–¥–Ω–æ —Å—ä—Å—Ç–æ—è–Ω–∏–µ –º–æ–∂–µ –¥–∞ –≤–ª–∏–∑–∞ –∏ –∏–∑–ª–∏–∑–∞ –æ—Ç —Ç–µ—Å—Ç. –ò–∑–≤–µ–¥–Ω—ä–∂ —Ä–µ–¥—ä—Ç –Ω–∞ —Ç–µ—Å—Ç–æ–≤–µ—Ç–µ –º–æ–∂–µ –¥–∞ –∏–º–∞ –∑–Ω–∞—á–µ–Ω–∏–µ.

–ó–∞ –¥–∞ –º–æ–≥–∞—Ç –∏–∑–æ–±—â–æ –¥–∞ —Ç–µ—Å—Ç–≤–∞—Ç –µ–¥–∏–Ω–∏—á–Ω–∏ —Å—ä—Å—Ç–æ—è–Ω–∏—è, —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏—Ü–∏—Ç–µ —á–µ—Å—Ç–æ —Ç—Ä—è–±–≤–∞ –¥–∞ —Å–º–µ–∫—á–∞—Ç —Ç–µ—Ö–Ω–∏—Ç–µ —Å–≤–æ–π—Å—Ç–≤–∞, –º–æ–∂–µ –±–∏ –∫–∞—Ç–æ –ø–æ–∑–≤–æ–ª—è—Ç –¥–∞–¥–µ–Ω –µ–∫–∑–µ–º–ø–ª—è—Ä –¥–∞ –±—ä–¥–µ –∑–∞–º–µ–Ω–µ–Ω —Å –¥—Ä—É–≥. –¢–∞–∫–∏–≤–∞ —Ä–µ—à–µ–Ω–∏—è –≤ –Ω–∞–π-–¥–æ–±—Ä–∏—è —Å–ª—É—á–∞–π —Å–∞ —Ö–∞–∫–æ–≤–µ, –∫–æ–∏—Ç–æ —Å—ä–∑–¥–∞–≤–∞—Ç –∫–æ–¥, –∫–æ–π—Ç–æ –µ —Ç—Ä—É–¥–µ–Ω –∑–∞ –ø–æ–¥–¥—ä—Ä–∂–∞–Ω–µ –∏ —Ä–∞–∑–±–∏—Ä–∞–Ω–µ. –í—Å–µ–∫–∏ —Ç–µ—Å—Ç –∏–ª–∏ –º–µ—Ç–æ–¥ `tearDown()`, –∫–æ–π—Ç–æ –∑–∞—Å—è–≥–∞ –Ω—è–∫–æ–µ –≥–ª–æ–±–∞–ª–Ω–æ —Å—ä—Å—Ç–æ—è–Ω–∏–µ, —Ç—Ä—è–±–≤–∞ –¥–∞ –æ—Ç–º–µ–Ω–∏ —Ç–µ–∑–∏ –ø—Ä–æ–º–µ–Ω–∏.

–ì–ª–æ–±–∞–ª–Ω–æ—Ç–æ —Å—ä—Å—Ç–æ—è–Ω–∏–µ –µ –Ω–∞–π-–≥–æ–ª—è–º–æ—Ç–æ –≥–ª–∞–≤–æ–±–æ–ª–∏–µ –ø—Ä–∏ —Ç–µ—Å—Ç–≤–∞–Ω–µ—Ç–æ –Ω–∞ –µ–¥–∏–Ω–∏—Ü–∏!

–ö–∞–∫ –¥–∞ –ø–æ–ø—Ä–∞–≤–∏–º —Å–∏—Ç—É–∞—Ü–∏—è—Ç–∞? –õ–µ—Å–Ω–æ. –ù–µ –ø–∏—à–µ—Ç–µ –∫–æ–¥, –∫–æ–π—Ç–æ –∏–∑–ø–æ–ª–∑–≤–∞ singletons, –∞ –ø—Ä–µ–¥–ø–æ—á–∏—Ç–∞–π—Ç–µ –¥–∞ –ø—Ä–µ–¥–∞–≤–∞—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏. –¢–æ–≤–∞ –µ –∏–Ω–∂–µ–∫—Ç–∏—Ä–∞–Ω–µ –Ω–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏.


–ì–ª–æ–±–∞–ª–Ω–∏ –∫–æ–Ω—Å—Ç–∞–Ω—Ç–∏ .[#toc-global-constants]
-------------------------------------------

–ì–ª–æ–±–∞–ª–Ω–æ—Ç–æ —Å—ä—Å—Ç–æ—è–Ω–∏–µ –Ω–µ —Å–µ –æ–≥—Ä–∞–Ω–∏—á–∞–≤–∞ —Å–∞–º–æ –¥–æ –∏–∑–ø–æ–ª–∑–≤–∞–Ω–µ—Ç–æ –Ω–∞ –µ–¥–∏–Ω–∏—á–Ω–∏ –∏ —Å—Ç–∞—Ç–∏—á–Ω–∏ –ø—Ä–æ–º–µ–Ω–ª–∏–≤–∏, –Ω–æ –º–æ–∂–µ –¥–∞ —Å–µ –ø—Ä–∏–ª–∞–≥–∞ –∏ –∑–∞ –≥–ª–æ–±–∞–ª–Ω–∏ –∫–æ–Ω—Å—Ç–∞–Ω—Ç–∏.

–ö–æ–Ω—Å—Ç–∞–Ω—Ç–∏, —á–∏—è—Ç–æ —Å—Ç–æ–π–Ω–æ—Å—Ç –Ω–µ –Ω–∏ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤—è –Ω–∏–∫–∞–∫–≤–∞ –Ω–æ–≤–∞ (`M_PI`) –∏–ª–∏ –ø–æ–ª–µ–∑–Ω–∞ (`PREG_BACKTRACK_LIMIT_ERROR`) –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è, —Å–∞ –æ—á–µ–≤–∏–¥–Ω–æ –û–ö.
–û–±—Ä–∞—Ç–Ω–æ, –∫–æ–Ω—Å—Ç–∞–Ω—Ç–∏, –∫–æ–∏—Ç–æ —Å–ª—É–∂–∞—Ç –∫–∞—Ç–æ –Ω–∞—á–∏–Ω –∑–∞ *–±–µ–∑–∂–∏—á–Ω–æ* –ø—Ä–µ–¥–∞–≤–∞–Ω–µ –Ω–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –≤—ä—Ç—Ä–µ –≤ –∫–æ–¥–∞, –Ω–µ —Å–∞ –Ω–∏—â–æ –ø–æ–≤–µ—á–µ –æ—Ç —Å–∫—Ä–∏—Ç–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç. –ö–∞—Ç–æ `LOG_FILE` –≤ —Å–ª–µ–¥–Ω–∏—è –ø—Ä–∏–º–µ—Ä.
–ò–∑–ø–æ–ª–∑–≤–∞–Ω–µ—Ç–æ –Ω–∞ –∫–æ–Ω—Å—Ç–∞–Ω—Ç–∞—Ç–∞ `FILE_APPEND` –µ –Ω–∞–ø—ä–ª–Ω–æ –ø—Ä–∞–≤–∏–ª–Ω–æ.

```php
const LOG_FILE = '...';

class Foo
{
	public function doSomething()
	{
		// ...
		file_put_contents(LOG_FILE, $message . "\n", FILE_APPEND);
		// ...
	}
}
```

–í —Ç–æ–∑–∏ —Å–ª—É—á–∞–π —Ç—Ä—è–±–≤–∞ –¥–∞ –¥–µ–∫–ª–∞—Ä–∏—Ä–∞–º–µ –ø–∞—Ä–∞–º–µ—Ç—ä—Ä–∞ –≤ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–∞ –Ω–∞ –∫–ª–∞—Å–∞ `Foo`, –∑–∞ –¥–∞ –≥–æ –Ω–∞–ø—Ä–∞–≤–∏–º —á–∞—Å—Ç –æ—Ç API:

```php
class Foo
{
	public function __construct(
		private string $logFile,
	) {
	}

	public function doSomething()
	{
		// ...
		file_put_contents($this->logFile, $message . "\n", FILE_APPEND);
		// ...
	}
}
```

–°–µ–≥–∞ –º–æ–∂–µ–º –¥–∞ –ø–æ–¥–∞–≤–∞–º–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –∑–∞ –ø—ä—Ç—è –¥–æ —Ñ–∞–π–ª–∞ –∑–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–∞–Ω–µ –∏ –ª–µ—Å–Ω–æ –¥–∞ –≥–æ –ø—Ä–æ–º–µ–Ω—è–º–µ –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç, –∫–æ–µ—Ç–æ —É–ª–µ—Å–Ω—è–≤–∞ —Ç–µ—Å—Ç–≤–∞–Ω–µ—Ç–æ –∏ –ø–æ–¥–¥—Ä—ä–∂–∫–∞—Ç–∞ –Ω–∞ –∫–æ–¥–∞.


–ì–ª–æ–±–∞–ª–Ω–∏ —Ñ—É–Ω–∫—Ü–∏–∏ –∏ —Å—Ç–∞—Ç–∏—á–Ω–∏ –º–µ—Ç–æ–¥–∏ .[#toc-global-functions-and-static-methods]
------------------------------------------------------------------------------

–ò—Å–∫–∞–º–µ –¥–∞ –ø–æ–¥—á–µ—Ä—Ç–∞–µ–º, —á–µ –∏–∑–ø–æ–ª–∑–≤–∞–Ω–µ—Ç–æ –Ω–∞ —Å—Ç–∞—Ç–∏—á–Ω–∏ –º–µ—Ç–æ–¥–∏ –∏ –≥–ª–æ–±–∞–ª–Ω–∏ —Ñ—É–Ω–∫—Ü–∏–∏ —Å–∞–º–æ –ø–æ —Å–µ–±–µ —Å–∏ –Ω–µ –µ –ø—Ä–æ–±–ª–µ–º–∞—Ç–∏—á–Ω–æ. –û–±—è—Å–Ω–∏—Ö–º–µ –Ω–µ—É–º–µ—Å—Ç–Ω–æ—Å—Ç—Ç–∞ –Ω–∞ –∏–∑–ø–æ–ª–∑–≤–∞–Ω–µ—Ç–æ –Ω–∞ `DB::insert()` –∏ –¥—Ä—É–≥–∏ –ø–æ–¥–æ–±–Ω–∏ –º–µ—Ç–æ–¥–∏, –Ω–æ –≤–∏–Ω–∞–≥–∏ –µ —Å—Ç–∞–≤–∞–ª–æ –≤—ä–ø—Ä–æ—Å –∑–∞ –≥–ª–æ–±–∞–ª–Ω–æ —Å—ä—Å—Ç–æ—è–Ω–∏–µ, —Å—ä—Ö—Ä–∞–Ω—è–≤–∞–Ω–æ –≤ —Å—Ç–∞—Ç–∏—á–Ω–∞ –ø—Ä–æ–º–µ–Ω–ª–∏–≤–∞. –ú–µ—Ç–æ–¥—ä—Ç `DB::insert()` –∏–∑–∏—Å–∫–≤–∞ —Å—ä—â–µ—Å—Ç–≤—É–≤–∞–Ω–µ—Ç–æ –Ω–∞ —Å—Ç–∞—Ç–∏—á–Ω–∞ –ø—Ä–æ–º–µ–Ω–ª–∏–≤–∞, –∑–∞—â–æ—Ç–æ —Å—ä—Ö—Ä–∞–Ω—è–≤–∞ –≤—Ä—ä–∑–∫–∞—Ç–∞ —Å –±–∞–∑–∞—Ç–∞ –¥–∞–Ω–Ω–∏. –ë–µ–∑ —Ç–∞–∑–∏ –ø—Ä–æ–º–µ–Ω–ª–∏–≤–∞ –±–∏ –±–∏–ª–æ –Ω–µ–≤—ä–∑–º–æ–∂–Ω–æ –¥–∞ —Å–µ —Ä–µ–∞–ª–∏–∑–∏—Ä–∞ –º–µ—Ç–æ–¥—ä—Ç.

–ò–∑–ø–æ–ª–∑–≤–∞–Ω–µ—Ç–æ –Ω–∞ –¥–µ—Ç–µ—Ä–º–∏–Ω–∏—Å—Ç–∏—á–Ω–∏ —Å—Ç–∞—Ç–∏—á–Ω–∏ –º–µ—Ç–æ–¥–∏ –∏ —Ñ—É–Ω–∫—Ü–∏–∏, –∫–∞—Ç–æ –Ω–∞–ø—Ä–∏–º–µ—Ä `DateTime::createFromFormat()`, `Closure::fromCallable`, `strlen()` –∏ –º–Ω–æ–≥–æ –¥—Ä—É–≥–∏, –µ –Ω–∞–ø—ä–ª–Ω–æ —Å—ä–≤–º–µ—Å—Ç–∏–º–æ —Å –∏–Ω–∂–µ–∫—Ç–∏—Ä–∞–Ω–µ—Ç–æ –Ω–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏. –¢–µ–∑–∏ —Ñ—É–Ω–∫—Ü–∏–∏ –≤–∏–Ω–∞–≥–∏ –≤—Ä—ä—â–∞—Ç –µ–¥–Ω–∏ –∏ —Å—ä—â–∏ —Ä–µ–∑—É–ª—Ç–∞—Ç–∏ –æ—Ç –µ–¥–Ω–∏ –∏ —Å—ä—â–∏ –≤—Ö–æ–¥–Ω–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∏ –∏ —Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª–Ω–æ —Å–∞ –ø—Ä–µ–¥–≤–∏–¥–∏–º–∏. –¢–µ –Ω–µ –∏–∑–ø–æ–ª–∑–≤–∞—Ç –Ω–∏–∫–∞–∫–≤–æ –≥–ª–æ–±–∞–ª–Ω–æ —Å—ä—Å—Ç–æ—è–Ω–∏–µ.

–í PHP –æ–±–∞—á–µ –∏–º–∞ —Ñ—É–Ω–∫—Ü–∏–∏, –∫–æ–∏—Ç–æ –Ω–µ —Å–∞ –¥–µ—Ç–µ—Ä–º–∏–Ω–∏—Ä–∞–Ω–∏. –°—Ä–µ–¥ —Ç—è—Ö –µ –Ω–∞–ø—Ä–∏–º–µ—Ä —Ñ—É–Ω–∫—Ü–∏—è—Ç–∞ `htmlspecialchars()`. –ù–µ–π–Ω–∏—è—Ç —Ç—Ä–µ—Ç–∏ –ø–∞—Ä–∞–º–µ—Ç—ä—Ä, `$encoding`, –∞–∫–æ –Ω–µ –µ –ø–æ—Å–æ—á–µ–Ω, –ø–æ –ø–æ–¥—Ä–∞–∑–±–∏—Ä–∞–Ω–µ –µ —Å—Ç–æ–π–Ω–æ—Å—Ç—Ç–∞ –Ω–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω–∞—Ç–∞ –æ–ø—Ü–∏—è `ini_get('default_charset')`. –ï—Ç–æ –∑–∞—â–æ —Å–µ –ø—Ä–µ–ø–æ—Ä—ä—á–≤–∞ –≤–∏–Ω–∞–≥–∏ –¥–∞ –ø–æ—Å–æ—á–≤–∞—Ç–µ —Ç–æ–∑–∏ –ø–∞—Ä–∞–º–µ—Ç—ä—Ä, –∑–∞ –¥–∞ –∏–∑–±–µ–≥–Ω–µ—Ç–µ –µ–≤–µ–Ω—Ç—É–∞–ª–Ω–æ –Ω–µ–ø—Ä–µ–¥—Å–∫–∞–∑—É–µ–º–æ –ø–æ–≤–µ–¥–µ–Ω–∏–µ –Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è—Ç–∞. Nette –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª–Ω–æ –ø—Ä–∞–≤–∏ —Ç–æ–≤–∞.

–ù—è–∫–æ–∏ —Ñ—É–Ω–∫—Ü–∏–∏, –∫–∞—Ç–æ –Ω–∞–ø—Ä–∏–º–µ—Ä `strtolower()`, `strtoupper()` –∏ –¥—Ä—É–≥–∏ –ø–æ–¥–æ–±–Ω–∏, –∏–º–∞—Ö–∞ –Ω–µ–¥–µ—Ç–µ—Ä–º–∏–Ω–∏—Ä–∞–Ω–æ –ø–æ–≤–µ–¥–µ–Ω–∏–µ –≤ –±–ª–∏–∑–∫–æ—Ç–æ –º–∏–Ω–∞–ª–æ –∏ –∑–∞–≤–∏—Å–µ—Ö–∞ –æ—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ç–∞ `setlocale()`. –¢–æ–≤–∞ –ø—Ä–µ–¥–∏–∑–≤–∏–∫–≤–∞—à–µ –º–Ω–æ–≥–æ —É—Å–ª–æ–∂–Ω–µ–Ω–∏—è, –Ω–∞–π-—á–µ—Å—Ç–æ –ø—Ä–∏ —Ä–∞–±–æ—Ç–∞ —Å —Ç—É—Ä—Å–∫–∏—è –µ–∑–∏–∫.
–¢–æ–≤–∞ –µ —Ç–∞–∫–∞, –∑–∞—â–æ—Ç–æ —Ç—É—Ä—Å–∫–∏—è—Ç –µ–∑–∏–∫ –ø—Ä–∞–≤–∏ —Ä–∞–∑–ª–∏–∫–∞ –º–µ–∂–¥—É –≥–æ–ª–µ–º–∏ –∏ –º–∞–ª–∫–∏ –±—É–∫–≤–∏ `I` —Å –∏ –±–µ–∑ —Ç–æ—á–∫–∞. –¢–∞–∫–∞ `strtolower('I')` –≤—Ä—ä—â–∞—à–µ —Å–∏–º–≤–æ–ª–∞ `ƒ±`, –∞ `strtoupper('i')` - —Å–∏–º–≤–æ–ª–∞ `ƒ∞`, –∫–æ–µ—Ç–æ –≤–æ–¥–µ—à–µ –¥–æ —Ç–æ–≤–∞, —á–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è—Ç–∞ –ø—Ä–µ–¥–∏–∑–≤–∏–∫–≤–∞—Ö–∞ —Ä–µ–¥–∏—Ü–∞ –º–∏—Å—Ç–µ—Ä–∏–æ–∑–Ω–∏ –≥—Ä–µ—à–∫–∏.
–¢–æ–∑–∏ –ø—Ä–æ–±–ª–µ–º –æ–±–∞—á–µ –±–µ—à–µ –æ—Ç—Å—Ç—Ä–∞–Ω–µ–Ω –≤—ä–≤ –≤–µ—Ä—Å–∏—è 8.2 –Ω–∞ PHP –∏ —Ñ—É–Ω–∫—Ü–∏–∏—Ç–µ –≤–µ—á–µ –Ω–µ –∑–∞–≤–∏—Å—è—Ç –æ—Ç –ª–æ–∫–∞–ª–∏—Ç–µ.

–¢–æ–≤–∞ –µ —Ö—É–±–∞–≤ –ø—Ä–∏–º–µ—Ä –∑–∞ —Ç–æ–≤–∞ –∫–∞–∫ –≥–ª–æ–±–∞–ª–Ω–æ—Ç–æ —Å—ä—Å—Ç–æ—è–Ω–∏–µ –µ –∏–∑–º—ä—á–≤–∞–ª–æ —Ö–∏–ª—è–¥–∏ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏—Ü–∏ –ø–æ —Ü–µ–ª–∏—è —Å–≤—è—Ç. –†–µ—à–µ–Ω–∏–µ—Ç–æ –±–µ—à–µ –¥–∞ –≥–æ –∑–∞–º–µ–Ω–∏–º —Å –∏–Ω–∂–µ–∫—Ç–∏—Ä–∞–Ω–µ –Ω–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏.


–ö–æ–≥–∞ –µ –≤—ä–∑–º–æ–∂–Ω–æ –¥–∞ —Å–µ –∏–∑–ø–æ–ª–∑–≤–∞ –≥–ª–æ–±–∞–ª–Ω–æ —Å—ä—Å—Ç–æ—è–Ω–∏–µ? .[#toc-when-is-it-possible-to-use-global-state]
--------------------------------------------------------------------------------------------------

–ò–º–∞ –Ω—è–∫–æ–∏ —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω–∏ —Å–∏—Ç—É–∞—Ü–∏–∏, –≤ –∫–æ–∏—Ç–æ –µ –≤—ä–∑–º–æ–∂–Ω–æ –¥–∞ —Å–µ –∏–∑–ø–æ–ª–∑–≤–∞ –≥–ª–æ–±–∞–ª–Ω–æ —Å—ä—Å—Ç–æ—è–Ω–∏–µ. –ù–∞–ø—Ä–∏–º–µ—Ä, –∫–æ–≥–∞—Ç–æ –æ—Ç—Å—Ç—Ä–∞–Ω—è–≤–∞—Ç–µ –≥—Ä–µ—à–∫–∏ –≤ –∫–æ–¥–∞ –∏ —Ç—Ä—è–±–≤–∞ –¥–∞ –∏–∑—Ö–≤—ä—Ä–ª–∏—Ç–µ —Å—Ç–æ–π–Ω–æ—Å—Ç—Ç–∞ –Ω–∞ –ø—Ä–æ–º–µ–Ω–ª–∏–≤–∞ –∏–ª–∏ –¥–∞ –∏–∑–º–µ—Ä–∏—Ç–µ –ø—Ä–æ–¥—ä–ª–∂–∏—Ç–µ–ª–Ω–æ—Å—Ç—Ç–∞ –Ω–∞ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∞ —á–∞—Å—Ç –æ—Ç –ø—Ä–æ–≥—Ä–∞–º–∞—Ç–∞. –í —Ç–∞–∫–∏–≤–∞ —Å–ª—É—á–∞–∏, –∫–æ–∏—Ç–æ —Å–µ –æ—Ç–Ω–∞—Å—è—Ç –¥–æ –≤—Ä–µ–º–µ–Ω–Ω–∏ –¥–µ–π—Å—Ç–≤–∏—è, –∫–æ–∏—Ç–æ –ø–æ-–∫—ä—Å–Ω–æ —â–µ –±—ä–¥–∞—Ç –ø—Ä–µ–º–∞—Ö–Ω–∞—Ç–∏ –æ—Ç –∫–æ–¥–∞, –µ –∑–∞–∫–æ–Ω–æ–º–µ—Ä–Ω–æ –¥–∞ —Å–µ –∏–∑–ø–æ–ª–∑–≤–∞ –≥–ª–æ–±–∞–ª–Ω–æ –¥–æ—Å—Ç—ä–ø–µ–Ω –¥—ä–º–ø–µ—Ä –∏–ª–∏ —Ö—Ä–æ–Ω–æ–º–µ—Ç—ä—Ä. –¢–µ–∑–∏ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∏ –Ω–µ —Å–∞ —á–∞—Å—Ç –æ—Ç –¥–∏–∑–∞–π–Ω–∞ –Ω–∞ –∫–æ–¥–∞.

–î—Ä—É–≥ –ø—Ä–∏–º–µ—Ä —Å–∞ —Ñ—É–Ω–∫—Ü–∏–∏—Ç–µ –∑–∞ —Ä–∞–±–æ—Ç–∞ —Å —Ä–µ–≥—É–ª—è—Ä–Ω–∏ –∏–∑—Ä–∞–∑–∏ `preg_*`, –∫–æ–∏—Ç–æ –≤—ä—Ç—Ä–µ—à–Ω–æ —Å—ä—Ö—Ä–∞–Ω—è–≤–∞—Ç –∫–æ–º–ø–∏–ª–∏—Ä–∞–Ω–∏ —Ä–µ–≥—É–ª—è—Ä–Ω–∏ –∏–∑—Ä–∞–∑–∏ –≤ —Å—Ç–∞—Ç–∏—á–µ–Ω –∫–µ—à –≤ –ø–∞–º–µ—Ç—Ç–∞. –ö–æ–≥–∞—Ç–æ –∏–∑–≤–∏–∫–≤–∞—Ç–µ –µ–¥–∏–Ω –∏ —Å—ä—â —Ä–µ–≥—É–ª—è—Ä–µ–Ω –∏–∑—Ä–∞–∑ –Ω—è–∫–æ–ª–∫–æ –ø—ä—Ç–∏ –≤ —Ä–∞–∑–ª–∏—á–Ω–∏ —á–∞—Å—Ç–∏ –Ω–∞ –∫–æ–¥–∞, —Ç–æ–π —Å–µ –∫–æ–º–ø–∏–ª–∏—Ä–∞ —Å–∞–º–æ –≤–µ–¥–Ω—ä–∂. –ö–µ—à—ä—Ç —Å–ø–µ—Å—Ç—è–≤–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª–Ω–æ—Å—Ç, –∞ –æ—Å–≤–µ–Ω —Ç–æ–≤–∞ –µ –Ω–∞–ø—ä–ª–Ω–æ –Ω–µ–≤–∏–¥–∏–º –∑–∞ –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª—è, —Ç–∞–∫–∞ —á–µ —Ç–∞–∫–∞–≤–∞ —É–ø–æ—Ç—Ä–µ–±–∞ –º–æ–∂–µ –¥–∞ —Å–µ —Å—á–∏—Ç–∞ –∑–∞ –ª–µ–≥–∏—Ç–∏–º–Ω–∞.


–û–±–æ–±—â–µ–Ω–∏–µ .[#toc-summary]
-------------------------

–ü–æ–∫–∞–∑–∞—Ö–º–µ –∑–∞—â–æ –∏–º–∞ —Å–º–∏—Å—ä–ª

1) –ü—Ä–µ–º–∞—Ö–Ω–µ—Ç–µ –≤—Å–∏—á–∫–∏ —Å—Ç–∞—Ç–∏—á–Ω–∏ –ø—Ä–æ–º–µ–Ω–ª–∏–≤–∏ –æ—Ç –∫–æ–¥–∞
2) –î–µ–∫–ª–∞—Ä–∏—Ä–∞–π—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏—Ç–µ
3) –ò –∏–∑–ø–æ–ª–∑–≤–∞–π—Ç–µ –∏–Ω–∂–µ–∫—Ç–∏—Ä–∞–Ω–µ –Ω–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

–ö–æ–≥–∞—Ç–æ –æ–±–º–∏—Å–ª—è—Ç–µ –¥–∏–∑–∞–π–Ω–∞ –Ω–∞ –∫–æ–¥–∞, –∏–º–∞–π—Ç–µ –ø—Ä–µ–¥–≤–∏–¥, —á–µ –≤—Å–µ–∫–∏ `static $foo` –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–≤–∞ –ø—Ä–æ–±–ª–µ–º. –ó–∞ –¥–∞ –º–æ–∂–µ –∫–æ–¥—ä—Ç –≤–∏ –¥–∞ –±—ä–¥–µ —Å—Ä–µ–¥–∞, —É–≤–∞–∂–∞–≤–∞—â–∞ DI, –µ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –Ω–∞–ø—ä–ª–Ω–æ –¥–∞ –∏–∑–∫–æ—Ä–µ–Ω–∏—Ç–µ –≥–ª–æ–±–∞–ª–Ω–æ—Ç–æ —Å—ä—Å—Ç–æ—è–Ω–∏–µ –∏ –¥–∞ –≥–æ –∑–∞–º–µ–Ω–∏—Ç–µ —Å –∏–Ω–∂–µ–∫—Ç–∏—Ä–∞–Ω–µ –Ω–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏.

–ü–æ –≤—Ä–µ–º–µ –Ω–∞ —Ç–æ–∑–∏ –ø—Ä–æ—Ü–µ—Å –º–æ–∂–µ –¥–∞ –æ—Ç–∫—Ä–∏–µ—Ç–µ, —á–µ —Ç—Ä—è–±–≤–∞ –¥–∞ —Ä–∞–∑–¥–µ–ª–∏—Ç–µ –¥–∞–¥–µ–Ω –∫–ª–∞—Å, –∑–∞—â–æ—Ç–æ —Ç–æ–π –∏–º–∞ –ø–æ–≤–µ—á–µ –æ—Ç –µ–¥–Ω–∞ –æ—Ç–≥–æ–≤–æ—Ä–Ω–æ—Å—Ç. –ù–µ —Å–µ –ø—Ä–∏—Ç–µ—Å–Ω—è–≤–∞–π—Ç–µ –∑–∞ —Ç–æ–≤–∞; —Å—Ç—Ä–µ–º–µ—Ç–µ —Å–µ –∫—ä–º –ø—Ä–∏–Ω—Ü–∏–ø–∞ –Ω–∞ –µ–¥–Ω–∞ –æ—Ç–≥–æ–≤–æ—Ä–Ω–æ—Å—Ç.

*–ò—Å–∫–∞–º –¥–∞ –±–ª–∞–≥–æ–¥–∞—Ä—è –Ω–∞ –ú–∏—à–∫–æ –•–µ–≤–µ—Ä–∏, —á–∏–∏—Ç–æ —Å—Ç–∞—Ç–∏–∏ –∫–∞—Ç–æ [Flaw: Brittle Global State & Singletons |https://web.archive.org/web/20230321084133/http://misko.hevery.com/code-reviewers-guide/flaw-brittle-global-state-singletons/] —Å–∞ –≤ –æ—Å–Ω–æ–≤–∞—Ç–∞ –Ω–∞ —Ç–∞–∑–∏ –≥–ª–∞–≤–∞.*

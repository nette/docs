Шаблоны
*******

Nette использует систему шаблонов [Latte |latte:]. Latte используется потому, что это самая безопасная система шаблонов для PHP, и в то же время самая интуитивно понятная. Вам не нужно изучать много нового, достаточно знать PHP и несколько тегов Latte.

Обычно страница заполняется из шаблона макета + шаблона действия. Вот как может выглядеть шаблон макета, обратите внимание на блоки `{block}` и тег `{include}`:

```latte
<!DOCTYPE html>
<html>
<head>
	<title>{block title}Мое приложение{/block}</title>
</head>
<body>
	<header>...</header>
	{include content}
	<footer>...</footer>
</body>
</html>
```

А это может быть шаблоном действий:

```latte
{block title}Главная страница{/block}

{block content}
<h1>Главная страница</h1>
...
{/block}
```

Он определяет блок `content`, который вставляется вместо `{include content}` в макете, а также переопределяет блок `title`, который перезаписывает `{block title}` в макете. Попытайтесь представить себе результат.


Поиск шаблонов
--------------

Путь к шаблонам выводится в соответствии с простой логикой. В случае с презентером `Product` и действием `show`, он пытается проверить, существует ли один из этих файлов шаблонов относительно каталога, в котором находится класс презентера:

- `templates/Product/show.latte`
- `templates/Product.show.latte`

Если шаблон не найден, ответом будет [ошибка 404 |#Ошибка 404 и т. д.].

Nette также попытается найти макет в этих местах:

- `templates/Product/@layout.latte`
- `templates/Product.@layout.latte`
- `templates/@layout.latte` общий макет для нескольких презентеров

Вы можете [легко изменить|#Шаблоны] место поиска шаблонов.


По умолчанию шаблоны ожидаются в следующих файлах, расположенных относительно каталога, в котором находится класс презентера:

- `templates/<Presenter>/<view>.latte`
- `templates/<Presenter>.<view>.latte`

Где `<Presenter>` — имя текущего презентера (например, `Product`) и `<view>` — имя текущего действия. Вид может быть изменен с помощью `$this->setView('otherView')`. Вы также можете указать имя файла шаблона напрямую вместо поиска, используя `$this->template->setFile('/path/to/template.latte')`.

Вы можете изменить пути поиска шаблонов, переопределив метод [formatTemplateFiles |api:Nette\Application\UI\Presenter::formatTemplateFiles()], который возвращает массив возможных путей к файлам.

Макет ожидается в следующих файлах:

- `templates/<Presenter>/@<layout>.latte`
- `templates/<Presenter>.@<layout>.latte`
- `templates/@<layout>.latte` общий шаблон для нескольких презентеров

Где `<Presenter>` — имя текущего презентера, а `<layout>` — строка `'layout'`, которая может быть изменена с помощью `$this->setLayout('otherLayout')`, так что будут опробованы файлы `@otherLayout.latte`.
Вы также можете напрямую указать имя файла шаблона макета, используя `$this->setLayout('/path/to/template.latte')`. Используйте `setLayout (false)`, чтобы отключить поиск макета.

Вы можете изменить пути поиска шаблонов, переопределив метод [formatLayoutTemplateFiles |api:Nette\Application\UI\Presenter::formatLayoutTemplateFiles()], который возвращает массив возможных путей к файлам.


Переменные в шаблоне
--------------------

Мы передаем переменные в шаблон, записывая их в `$this->template`. Например, мы создадим переменную `$article` следующим образом:

```php
$this->template->article = $this->articles->getById($id);
```

Презентеры и компоненты автоматически передают шаблонам несколько полезных переменных:

- `$basePath` это абсолютный путь к корневому каталогу (например, `/CD-collection`)
- `$baseUrl` это абсолютный URL-адрес корневого каталога (например, `http://localhost/CD-collection`)
- `$user` это объект, [представляющий пользователя |security:authentication]
- `$presenter` текущий презентер
- `$control` текущий компонент или презентер
- `$flashes` список [сообщений |#Флэш-сообщения], отправленных методом `flashMessage()`


Ссылки
------

Ссылки, созданные с помощью `link()` или `n:href`, всегда являются абсолютными путями, но не абсолютными URL с протоколом и доменом, как `http://domain`. Чтобы генерировать абсолютные URL, необходимо установить `$this->absoluteUrls = true`.

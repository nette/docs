AntispamControl
***************

Jednoduchý pasivní((neotravuje uživatele)) antispam.

|* Verze | 0.4
|* Určeno pro | Nette 2.0.x
|* Download | https://gist.github.com/2388131
|* Forum thread | http://forum.nette.org/cs/10631-antispamcontrol-jednoduchy-antispam
|* Autor | Michal Mikoláš

Instalace
---------

1) Stáhněte soubor "AntispamControl.php":https://gist.github.com/2388131 a uložte do adresáře `libs`
2) V `BasePresenteru` registrujte `AntispamControl` jako rozšíření formulářů
/--php
class BasePresenter
{
    function startup()
    {
        AntispamControl::register();
    }
}
\--

Příklad použití
---------------

Ve formuláři aktivujte antispam:
/--php
$form->addAntispam();  // to je vše :-)
\--

Data z formuláře teď budou obsahovat také položku `spam` (název lze změnit, viz níže). Pokud údaje z formuláře ukládáte do DB, je tedy vhodné ji odstranit:
/--php
	public function testFormSubmitted(Form $form)
	{
		$values = $form->getValues();
		unset($values['spam']);

		...
	}
\--

Jak to funguje?
---------------
Výše zmíněný příklad vloží do formuláře textové pole, na které se roboti "nachytají" a vyplní ho. Uživateli ho pomocí javascriptu skryjeme (uživatelům, kteří mají vypnutý javascript se u pole zobrazí popisek "Toto pole vymažte"). Pokud je tedy toto pole vyplněno, předpokládáme, že jde o spam (pozn.:tento typ antispamu má cca "80% úspěšnost":http://www.dreamface.net/michal/?face=zajimavost&c=31)

Pokud chcete, můžete název tohoto pole, jeho popisek, nebo chybovou hlášku při detekování spamu, změnit:
/--php
// addAntispam($name='spam', $label='Toto pole vymažte', $errMessage='Byl detekován pokus o spam.')
$form->addAntispam('novy_nazev', 'Nevyplňovat!', 'Jsi spamovací robot?!');
\--

Od verze 0.4 je také kontrolována doba vyplňování formuláře. Pokud je kratší, než 5 sekund, jde pravděpodobně o spam. Tuto dobu je možno nastavit přes statickou proměnnou `AntispamControl::$minDelay`:
/--php
class BasePresenter
{
    function startup()
    {
        AntispamControl::register();
        AntispamControl::$minDelay = 15;  // 15 sec
    }
}
\--
Nastavení `$minDelay` na nulu tento typ kontroly vypne.

{{author: nanuqcz|2972}}

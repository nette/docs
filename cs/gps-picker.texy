GpsPicker
*********

Formulářový prvek pro výběr souřadnic v mapě. .[perex]

|* Composer | "vojtech-dobes/nette-forms-gpspicker":http://packagist.org/packages/vojtech-dobes/nette-forms-gpspicker
|* Github | https://github.com/vojtech-dobes/nette-forms-gpspicker
|* Fórum | http://forum.nette.org/cs/11922-gpspicker-formularovy-prvek-pro-vyber-gps
|* Autor | Vojtěch Dobeš
|* Licence | New BSD

Instalace
---------

1. Získáme zdrojový kód z Githubu.
2. Obsah složky `src` přidáme mezi knihovny.
3. V `bootstrap.php` provedeme registraci `VojtechDobes\NetteForms\GpsPositionPicker::register();`.
4. Do `app/@layout.latte` přilinkujeme jQuery, "Google Maps API v3":https://developers.google.com/maps/documentation/javascript/tutorial a `client/nette.gpsPicker.js`.

Použití
---------

/--php
$form->addGpsPicker('coords', 'Coordinates:');
\--

Můžeme přidat nastavení:

/--php
$form->addGpsPicker('coords', 'Coordinates:', array(
	'type' => VojtechDobes\NetteForms\GpsPicker::TYPE_SATELLITE,
	'zoom' => 1,
	'size' => array(
		'x' => 411,
		'y' => 376,
	),
));
\--

Pokud bychom chtěli formulář renderovat manuálně, můžeme vynechat popisek:

/--php
$form->addGpsPicker('coords', array(
	'type' => ...
	...
));
\--

Vrácená hodnota prvku je instancí `GpsPoint` s proměnnými `lat` a `lng`. `GpsPoint` dědí od [api:Nette\Object].

/--php
$lat = $form->values->coords->lat;
$lng = $form->values->coords->lng;
\--

### Validace

/--php
use VojtechDobes\NetteForms\GpsPicker as Gps;
\--

Prvek podporuje následující validační pravidla:

/--php
$form->addGpsPicker('coords')
    ->addRule(Gps::MIN_LAT, 'Minimální zeměpisná šířka musí být %f.', 20)
    ->addRule(Gps::MIN_LNG, 'Minimální zeměpisná výška musí být %f.', 40)
    ->addRule(Gps::MAX_LAT, 'Maximální zeměpisná šířka musí být %f.', 20)
    ->addRule(Gps::MAX_LNG, 'Maximální zeměpisná výška musí být %f.', 40)
    ->addRule(Gps::MIN_DISTANCE_FROM, 'Minimální vzdálenost od Prahy musí být %i metrů.', array(15000, array(
        'lat' => 50.083,
        'lng' => 14.423,
    )));
    ->addRule(Gps::MAX_DISTANCE_FROM, 'Maximální vzdálenost od Prahy musí být %i metrů.', array(100000, array(
        'lat' => 50.083,
        'lng' => 14.423,
    )));
\--

První čtyři pravidla jsou validována i Javascriptem.

{{author: vojtech.dobes|3328}}

Jak fungujÃ­ aplikace?
*********************

<div class=perex>

PrÃ¡vÄ› Ätete zÃ¡kladnÃ­ listinu dokumentace Nette. DozvÃ­te se celÃ½ princip fungovÃ¡nÃ­ webovÃ½ch aplikacÃ­. PÄ›knÄ› od A do Z, od chvÃ­le zrozenÃ­ aÅ¾ do poslednÃ­ho vydechnutÃ­ PHP skriptu. Po pÅ™eÄtenÃ­ budete vÄ›dÄ›t:

- jak to celÃ© funguje
- co je to Bootstrap, Presenter a DI kontejner
- jak vypadÃ¡ adresÃ¡Å™ovÃ¡ struktura

</div>


AdresÃ¡Å™ovÃ¡ struktura
====================

OtevÅ™ete si pÅ™Ã­klad skeletonu webovÃ© aplikace zvanÃ© [WebProject|https://github.com/nette/web-project] a pÅ™i ÄtenÃ­ se mÅ¯Å¾ete dÃ­vat na soubory, o kterÃ½ch je Å™eÄ.

AdresÃ¡Å™ovÃ¡ struktura vypadÃ¡ nÄ›jak takto:

/--pre
<b>web-project/</b>
â”œâ”€â”€ <b>app/</b>                      â† adresÃ¡Å™ s aplikacÃ­
â”‚   â”œâ”€â”€ <b>Presenters/</b>           â† presentery a Å¡ablony
â”‚   â”‚   â”œâ”€â”€ <b>HomepagePresenter.php</b>  â† tÅ™Ã­da presenteru Homepage
â”‚   â”‚   â””â”€â”€ <b>templates/</b>        â† adresÃ¡Å™ se Å¡ablonami
â”‚   â”‚       â”œâ”€â”€ <b>@layout.latte</b> â† Å¡ablona layoutu
â”‚   â”‚       â””â”€â”€ <b>Homepage/</b>     â† Å¡ablony presenteru Homepage
â”‚   â”‚           â””â”€â”€ <b>default.latte</b>  â† Å¡ablona akce 'default'
â”‚   â”œâ”€â”€ <b>Router/</b>               â† konfigurace URL adres
â”‚   â””â”€â”€ <b>Bootstrap.php</b>         â† zavÃ¡dÄ›cÃ­ tÅ™Ã­da Bootstrap
â”œâ”€â”€ <b>bin/</b>                      â† skripty spouÅ¡tÄ›nÃ© z pÅ™Ã­kazovÃ© Å™Ã¡dky
â”œâ”€â”€ <b>config/</b>                   â† konfiguraÄnÃ­ soubory
â”‚   â”œâ”€â”€ <b>common.neon</b>
â”‚   â””â”€â”€ <b>local.neon</b>
â”œâ”€â”€ <b>log/</b>                      â† logovanÃ© chyby
â”œâ”€â”€ <b>temp/</b>                     â† doÄasnÃ© soubory, cache, â€¦
â”œâ”€â”€ <b>vendor/</b>                   â† knihovny instalovanÃ© Composerem
â”‚   â”œâ”€â”€ ...
â”‚   â””â”€â”€ <b>autoload.php</b>          â† autoloading vÅ¡ech nainstalovanÃ½ch balÃ­ÄkÅ¯
â”œâ”€â”€ <b>www/</b>                      â† veÅ™ejnÃ½ adresÃ¡Å™ neboli document-root projektu
â”‚   â”œâ”€â”€ <b>.htaccess</b>             â† pravidla mod_rewrite
â”‚   â””â”€â”€ <b>index.php</b>             â† prvotnÃ­ soubor, kterÃ½m se aplikace spouÅ¡tÃ­
â””â”€â”€ <b>.htaccess</b>                 â† zakazuje pÅ™Ã­stup do vÅ¡ech adresÃ¡Å™Å¯ krom www
\--

AdresÃ¡Å™ovou strukturu mÅ¯Å¾ete jakkoliv mÄ›nit, sloÅ¾ky pÅ™ejmenovat Äi pÅ™esunout, a potÃ© pouze upravit cesty k `log/` a `temp/` v souboru `Bootstrap.php` a dÃ¡le cestu k tomuto souboru v `composer.json` v sekci `autoload`. Nic vÃ­c, Å¾Ã¡dnÃ¡ sloÅ¾itÃ¡ rekonfigurace, Å¾Ã¡dnÃ© zmÄ›ny konstant. Nette totiÅ¾ disponuje [chytrou autodetekcÃ­|bootstrap#vyvojarsky-vs-produkcni-rezim].

VeÅ™ejnÃ½ adresÃ¡Å™ `www/` lze mÄ›nit bez nutnosti cokoliv dalÅ¡Ã­ho nastavovat. VlastnÄ› je bÄ›Å¾nÃ©, Å¾e kvÅ¯li specifikÅ¯m vaÅ¡eho hostingu bude potÅ™eba jej pÅ™ejmenovat, nebo naopak v konfiguraci hostingu nastavit tzv. document-root do tohoto adresÃ¡Å™e. Pokud by vÃ¡Å¡ hosting neumoÅ¾Åˆoval vytvÃ¡Å™et sloÅ¾ky o ÃºroveÅˆ vÃ½Å¡ nad veÅ™ejnÃ½m adresÃ¡Å™em, dobÅ™e vÃ¡m radÃ­me, aÅ¥ se poohlÃ©dnete po jinÃ©m hostingu. Å li byste jinak do znaÄnÃ©ho bezpeÄnostnÃ­ho rizika.

WebProject si mÅ¯Å¾ete takÃ© rovnou stÃ¡hnout vÄetnÄ› Nette a to pomocÃ­ [Composeru |composer]:

```shell
composer create-project nette/web-project
```

Na Linuxu nebo macOS nastavte adresÃ¡Å™Å¯m `log/` a `temp/` [prÃ¡va pro zÃ¡pis |troubleshooting#NastavenÃ­ prÃ¡v adresÃ¡Å™Å¯].

Aplikace WebProject je pÅ™ipravenÃ¡ ke spuÅ¡tÄ›nÃ­, nenÃ­ tÅ™eba vÅ¯bec nic konfigurovat a mÅ¯Å¾ete ji rovnou zobrazit v prohlÃ­Å¾eÄi pÅ™Ã­stupem ke sloÅ¾ce `www/`.


HTTP poÅ¾adavek
==============

VÅ¡e zaÄÃ­nÃ¡ ve chvÃ­li, kdy uÅ¾ivatel v prohlÃ­Å¾eÄi otevÅ™e strÃ¡nku. Tedy kdyÅ¾ prohlÃ­Å¾eÄ zaklepe na server s HTTP poÅ¾adavkem. PoÅ¾adavek mÃ­Å™Ã­ na jedinÃ½ PHP soubor, kterÃ½ se nachÃ¡zÃ­ ve veÅ™ejnÃ©m adresÃ¡Å™i `www/`, a tÃ­m je `index.php`. Dejme tomu, Å¾e jde o poÅ¾adavek na adresu `https://example.com/product/123`. DÃ­ky vhodnÃ©mu [nastavenÃ­ serveru|troubleshooting#Jak nastavit server pro hezkÃ¡ URL?] se i tohle URL mapuje na soubor `index.php` a ten se vykonÃ¡.

Jeho Ãºkolem je:

1) inicializovat prostÅ™edÃ­
2) zÃ­skat tovÃ¡rnu
3) spustit Nette aplikaci, kterÃ¡ vyÅ™Ã­dÃ­ poÅ¾adavek

Jakou Å¾e tovÃ¡rnu? NevyrÃ¡bÃ­me pÅ™ece traktory, ale webovÃ© strÃ¡nky! VydrÅ¾te, hned se to vysvÄ›tlÃ­.

Slovy â€inicializace prostÅ™edÃ­â€œ myslÃ­me napÅ™Ã­klad to, Å¾e se aktivuje [Tracy|tracy:], coÅ¾ je ÃºÅ¾asnÃ½ nÃ¡stroj pro logovÃ¡nÃ­ nebo vizualizaci chyb. Na produkÄnÃ­m serveru chyby loguje, na vÃ½vojovÃ©m rovnou zobrazuje. TudÃ­Å¾ k inicializaci patÅ™Ã­ i rozhodnutÃ­, zda web bÄ›Å¾Ã­ v produkÄnÃ­m nebo vÃ½vojÃ¡Å™skÃ©m reÅ¾imu. K tomu Nette pouÅ¾Ã­vÃ¡ autodetekci: pokud web spouÅ¡tÃ­te na localhost, bÄ›Å¾Ã­ v reÅ¾imu vÃ½vojÃ¡Å™skÃ©m. NemusÃ­te tak nic konfigurovat a aplikace je rovnou pÅ™ipravena jak pro vÃ½voj, tak ostrÃ© nasazenÃ­. Tyhle kroky se provÃ¡dÄ›jÃ­ a jsou podrobnÄ› rozepsanÃ© v kapitole o [tÅ™Ã­dÄ› Bootstrap|Bootstrap].

TÅ™etÃ­m bodem (ano, druhÃ½ jsme pÅ™eskoÄili, ale vrÃ¡tÃ­me se k nÄ›mu) je spuÅ¡tÄ›nÃ­ aplikace. VyÅ™izovÃ¡nÃ­ HTTP poÅ¾adavkÅ¯ mÃ¡ v Nette na starosti tÅ™Ã­da `Nette\Application\Application` (dÃ¡le `Application`), takÅ¾e kdyÅ¾ Å™Ã­kÃ¡me spustit aplikaci, myslÃ­me tÃ­m konkrÃ©tnÄ› zavolÃ¡nÃ­ metody s pÅ™Ã­znaÄnÃ½m nÃ¡zvem `run()` na objektu tÃ©to tÅ™Ã­dy.

NynÃ­ musÃ­me pÅ™ipomenout vÄ›tu z [pÅ™edmluvy |why-use-nette], Å¾e Nette je mentor, kterÃ½ vÃ¡s vede k psanÃ­ ÄistÃ½ch aplikacÃ­ podle osvÄ›dÄenÃ½ch metodik. A jedna z tÄ›ch naprosto nejosvÄ›dÄenÄ›jÅ¡Ã­ch se nazÃ½vÃ¡ **dependency injection**, zkrÃ¡cenÄ› DI. V tuto chvÃ­li vÃ¡s nechceme zatÄ›Å¾ovat vysvÄ›tlovÃ¡nÃ­m DI, od toho je tu [samostatnÃ¡ kapitola|Dependency Injection], podstatnÃ½ je dÅ¯sledek, Å¾e klÃ­ÄovÃ© objekty nÃ¡m bude obvykle vytvÃ¡Å™et tovÃ¡rna na objekty, kterÃ© se Å™Ã­kÃ¡ **DI kontejner** (zkrÃ¡cenÄ› DIC). Ano, to je ta tovÃ¡rna, o kterÃ© byla pÅ™ed chvÃ­li Å™eÄ. A vyrobÃ­ nÃ¡m i objekt `Application`, proto potÅ™ebujeme nejprve kontejner. ZÃ­skÃ¡me jej pomocÃ­ tÅ™Ã­dy `Configurator` a nechÃ¡me jej vyrobit objekt `Application`, zavolÃ¡me na nÄ›m metodu `run()` a tÃ­m se spustÃ­ Nette aplikace. PÅ™esnÄ› tohle se dÄ›je v souboru [index.php|Bootstrap#index.php].


Nette Application
=================

TÅ™Ã­da Application mÃ¡ jedinÃ½ Ãºkol: odpovÄ›dÄ›t na HTTP poÅ¾adavek.

Aplikace psanÃ© v Nette se ÄlenÃ­ do spousty tzv. presenterÅ¯ (v jinÃ½ch frameworcÃ­ch se mÅ¯Å¾ete setkat s termÃ­nem controller, jde o totÃ©Å¾), coÅ¾ jsou tÅ™Ã­dy, z nichÅ¾ kaÅ¾dÃ¡ pÅ™edstavuje nÄ›jakou konkrÃ©tnÃ­ strÃ¡nku webu: napÅ™. homepage; produkt v e-shopu; pÅ™ihlaÅ¡ovacÃ­ formulÃ¡Å™; sitemap feed atd. Aplikace mÅ¯Å¾e mÃ­t od jednoho po tisÃ­ce presenterÅ¯.

Application zaÄne tÃ­m, Å¾e poÅ¾Ã¡dÃ¡ tzv. router, aby rozhodl, kterÃ©mu z presenterÅ¯ pÅ™edat aktuÃ¡lnÃ­ poÅ¾adavek k vyÅ™Ã­zenÃ­. Router rozhodne, ÄÃ­ je to zodpovÄ›dnost. PodÃ­vÃ¡ se na vstupnÃ­ URL `https://example.com/product/123` a na zÃ¡kladÄ› toho, jak je nastavenÃ½, rozhodne, Å¾e tohle je prÃ¡ce napÅ™. pro **presenter** `Product`, po kterÃ©m bude chtÃ­t jako **akci** zobrazenÃ­ (`show`) produktu s `id: 123`. Dvojici presenter + akce je dobrÃ½m zvykem zapisovat oddÄ›lenÃ© dvojteÄkou jako `Product:show`.

Tedy router transformoval URL na dvojici `Presenter:action` + parametry, v naÅ¡em pÅ™Ã­padÄ› `Product:show` + `id: 123`. Jak takovÃ½ router vypadÃ¡ se mÅ¯Å¾ete podÃ­vat v souboru `app/Router/RouterFactory.php` a podrobnÄ› ho popisujeme v kapitole [Routing].

PojÄme dÃ¡l. Application uÅ¾ znÃ¡ jmÃ©no presenteru a mÅ¯Å¾e pokraÄovat dÃ¡l. TÃ­m Å¾e vyrobÃ­ objekt tÅ™Ã­dy `ProductPresenter`, coÅ¾ je kÃ³d presenteru `Product`. PÅ™esnÄ›ji Å™eÄeno, poÅ¾Ã¡dÃ¡ DI kontejner, aby presenter vyrobil, protoÅ¾e od vyrÃ¡bÄ›nÃ­ je tu on.

Presenter mÅ¯Å¾e vypadat tÅ™eba takto:

```php
class ProductPresenter extends Nette\Application\UI\Presenter
{
	private $repository;

	public function __construct(ProductRepository $repository)
	{
		$this->repository = $repository;
	}

	public function renderShow(int $id): void
	{
		// zÃ­skÃ¡me data z modelu a pÅ™edÃ¡me do Å¡ablony
		$this->template->product = $this->repository->getProduct($id);
	}
}
```

VyÅ™izovÃ¡nÃ­ poÅ¾adavku pÅ™ebÃ­rÃ¡ presenter. A Ãºkol znÃ­ jasnÄ›: proveÄ akci `show` s `id: 123`. CoÅ¾ v Å™eÄi presenterÅ¯ znamenÃ¡, Å¾e se zavolÃ¡ metoda `renderShow()` a v parametru `$id` dostane `123`.

Presenter mÅ¯Å¾e obsluhovat vÃ­ce akcÃ­, tedy mÃ­t vÃ­ce metod `render<Akce>()`. Ale doporuÄujeme navrhovat presentery s jednou nebo co nejmÃ©nÄ› akcemi.

TakÅ¾e, zavolala se metoda `renderShow(123)`, jejÃ­Å¾ kÃ³d je sice smyÅ¡lenÃ½ pÅ™Ã­klad, ale mÅ¯Å¾ete na nÄ›m vidÄ›t, jak se pÅ™edÃ¡vajÃ­ data do Å¡ablony, tedy zÃ¡pisem do `$this->template`.

NÃ¡slednÄ› presenter vrÃ¡tÃ­ odpovÄ›Ä. Tou mÅ¯Å¾e bÃ½t HTML strÃ¡nka, obrÃ¡zek, XML dokument, odeslÃ¡nÃ­ souboru z disku, JSON nebo tÅ™eba pÅ™esmÄ›rovÃ¡nÃ­ na jinou strÃ¡nku. DÅ¯leÅ¾itÃ© je, Å¾e pokud explicitnÄ› neÅ™ekneme, jak mÃ¡ odpovÄ›dÄ›t (coÅ¾ je pÅ™Ã­pad `ProductPresenter`), bude odpovÄ›dÃ­ vykreslenÃ­ Å¡ablony s HTML strÃ¡nkou. ProÄ? ProtoÅ¾e v 99 % pÅ™Ã­padÅ¯ chceme vykreslit Å¡ablonu, tudÃ­Å¾ presenter tohle chovÃ¡nÃ­ bere jako vÃ½chozÃ­ a chce nÃ¡m ulehÄit prÃ¡ci. To je smyslem Nette.

NemusÃ­me ani uvÃ¡dÄ›t, jakou Å¡ablonu vykreslit, cestu k nÃ­ si odvodÃ­ podle jednoduchÃ© logiky. V pÅ™Ã­padÄ› presenteru `Product` a akce `show` zkusÃ­, zda existuje jeden z tÄ›chto souborÅ¯ se Å¡ablonou uloÅ¾enÃ½ch relativnÄ› od adresÃ¡Å™e s tÅ™Ã­dou `ProductPresenter`:

- `templates/Product/show.latte`
- `templates/Product.show.latte`

TaktÃ©Å¾ se pokusÃ­ dohledat layout v tÄ›chto umÃ­stÄ›nÃ­ch:

- `templates/Product/@layout.latte`
- `templates/Product.@layout.latte`
- `templates/@layout.latte` â€“ layout spoleÄnÃ½ pro vÃ­ce presenterÅ¯

A nÃ¡slednÄ› Å¡ablonu vykreslÃ­. TÃ­m je Ãºkol presenteru i celÃ© aplikace dokonÃ¡n a dÃ­lo jest zavrÅ¡eno. Pokud by Å¡ablona neexistovala, vrÃ¡tÃ­ se strÃ¡nka s chybou 404. VÃ­ce se o presenterech doÄtete na strÃ¡nce [Presentery|presenters].

Pro jistotu, zkusme si zrekapitulovat celÃ½ proces s troÅ¡ku jinou URL:

1) URL bude `https://example.com`
2) bootujeme aplikaci, vytvoÅ™Ã­ se kontejner a spustÃ­ `Application::run()`
3) router URL dekÃ³duje jako dvojici `Homepage:default`
4) vytvoÅ™Ã­ se objekt tÅ™Ã­dy `HomepagePresenter`
5) zavolÃ¡ se metoda `renderDefault()` (pokud existuje)
6) vykreslÃ­ se Å¡ablona napÅ™. `templates/Homepage/default.latte` s layoutem napÅ™. `templates/@layout.latte`


MoÅ¾nÃ¡ jste se teÄ setkali s velkou spoustou novÃ½ch pojmÅ¯, ale vÄ›Å™Ã­me, Å¾e dÃ¡vajÃ­ smysl. Tvorba aplikacÃ­ v Nette je ohromnÃ¡ pohodiÄka.


Å ablony
=======

KdyÅ¾ uÅ¾ pÅ™iÅ¡la Å™eÄ na Å¡ablony, v Nette se pouÅ¾Ã­vÃ¡ Å¡ablonovacÃ­ systÃ©m [Latte |latte:]. Proto taky ty koncovky `.latte` u Å¡ablon. Latte se pouÅ¾Ã­vÃ¡ jednak proto, Å¾e jde o nejlÃ©pe zabezpeÄenÃ½ Å¡ablonovacÃ­ systÃ©m pro PHP, a zÃ¡roveÅˆ takÃ© systÃ©m nejintuitivnÄ›jÅ¡Ã­. NemusÃ­te se uÄit mnoho novÃ©ho, vystaÄÃ­te si se znalostÃ­ PHP a nÄ›kolika znaÄek. VÅ¡echno se dozvÃ­te [v dokumentaci |latte:].

V Å¡ablonÄ› se [vytvÃ¡Å™ejÃ­ odkazy |creating-links] na dalÅ¡Ã­ presentery & akce takto:

```html
<a n:href="Product:show $productId">detail produktu</a>
```

ProstÄ› mÃ­sto reÃ¡lnÃ©ho URL napÃ­Å¡ete znÃ¡mÃ½ pÃ¡r `Presenter:action` a uvedete pÅ™Ã­padnÃ© parametry. Trik je v tom `n:href`, kterÃ© Å™Ã­kÃ¡, Å¾e tento atribut zpracuje Nette. A vygeneruje:

```html
<a href="/product/456">detail produktu</a>
```

GenerovÃ¡nÃ­ URL mÃ¡ na starosti uÅ¾ dÅ™Ã­ve zmÃ­nÄ›nÃ½ router. TotiÅ¾ routery v Nette jsou vÃ½jimeÄnÃ© tÃ­m, Å¾e dokÃ¡Å¾Ã­ provÃ¡dÄ›t nejen transformace z URL na dvojici presenter:action, ale takÃ© obrÃ¡cenÄ›, tedy z nÃ¡zvu presenteru + akce + parametrÅ¯ vygenerovat URL.
DÃ­ky tomu v Nette mÅ¯Å¾ete ÃºplnÄ› zmÄ›nit tvary URL v celÃ© hotovÃ© aplikaci, aniÅ¾ byste zmÄ›nili jedinÃ½ znak v Å¡ablonÄ› nebo presenteru. Jen tÃ­m, Å¾e upravÃ­te router.
TakÃ© dÃ­ky tomu funguje tzv. kanonizace, coÅ¾ je dalÅ¡Ã­ unikÃ¡tnÃ­ vlastnost Nette, kterÃ¡ pÅ™ispÃ­vÃ¡ k lepÅ¡Ã­mu SEO (optimalizaci nalezitelnosti na internetu) tÃ­m, Å¾e automaticky zabraÅˆuje existenci duplicitnÃ­ho obsahu na rÅ¯znÃ½ch URL.
HodnÄ› programÃ¡torÅ¯ to povaÅ¾uje za ohromujÃ­cÃ­.


Komponenty
==========

O presenterech vÃ¡m musÃ­me prozradit jeÅ¡tÄ› jednu vÄ›c: majÃ­ v sobÄ› zabudovanÃ½ komponentovÃ½ systÃ©m. NÄ›co podobnÃ©ho mohou pamÄ›tnÃ­ci znÃ¡t z Delphi nebo ASP.NET Web Forms, na nÄ›Äem vzdÃ¡lenÄ› podobnÃ©m je postaven React nebo Vue.js. Ve svÄ›tÄ› PHP frameworkÅ¯ jde o naprosto unikÃ¡tnÃ­ zÃ¡leÅ¾itost.

Komponenty jsou samostatnÃ© znovupouÅ¾itelnÃ© celky, kterÃ© vklÃ¡dÃ¡me do strÃ¡nek (tedy presenterÅ¯). Mohou to bÃ½t [formulÃ¡Å™e |form-presenter], [datagridy |https://componette.org/contributte/datagrid/], menu, hlasovacÃ­ ankety, vlastnÄ› cokoliv, co mÃ¡ smysl pouÅ¾Ã­vat opakovanÄ›. MÅ¯Å¾eme vytvÃ¡Å™et vlastnÃ­ komponenty nebo pouÅ¾Ã­vat nÄ›kterÃ© z [ohromnÃ© nabÃ­dky |https://componette.org] open source komponent.

Komponenty zÃ¡sadnÃ­m zpÅ¯sobem ovlivÅˆujÃ­ pÅ™Ã­stup k tvorbÄ› aplikacÃ­m. OtevÅ™ou vÃ¡m novÃ© moÅ¾nosti sklÃ¡dÃ¡nÃ­ strÃ¡nek z pÅ™edpÅ™ipravenÃ½ch jednotek. A navÃ­c majÃ­ nÄ›co spoleÄnÃ©ho s [Hollywoodem|components#Hollywood style].


DI kontejner a konfigurace
==========================

DI kontejner neboli tovÃ¡rna na objekty je srdce celÃ© aplikace.

NemÄ›jte obavy, nenÃ­ to Å¾Ã¡dnÃ½ magickÃ½ black box, jak by se tÅ™eba mohlo z pÅ™edchozÃ­ch Å™Ã¡dkÅ¯ zdÃ¡t. VlastnÄ› je to jedna docela nudnÃ¡ PHP tÅ™Ã­da, kterou vygeneruje Nette a uloÅ¾Ã­ do adresÃ¡Å™e s cache. MÃ¡ spoustu metod pojmenovanÃ½ch jako `createServiceAbcd()` a kaÅ¾dÃ¡ z nich umÃ­ vyrobit a vrÃ¡tit nÄ›jakÃ½ objekt. Ano, je tam i metoda `createServiceApplication()`, kterÃ¡ vyrobÃ­ `Nette\Application\Application`, kterÃ½ jsme potÅ™ebovali v souboru `index.php` pro spuÅ¡tÄ›nÃ­ aplikace. A jsou tam metody vyrÃ¡bÄ›jÃ­cÃ­ jednotlivÃ© presentery. A tak dÃ¡le.

ObjektÅ¯m, kterÃ© DI kontejner vytvÃ¡Å™Ã­, se z nÄ›jakÃ©ho dÅ¯vodu Å™Ã­kÃ¡ sluÅ¾by.

Co je na tÃ©to tÅ™Ã­dÄ› opravdu speciÃ¡lnÃ­ho, tak Å¾e ji neprogramujete vy, ale framework. On skuteÄnÄ› vygeneruje PHP kÃ³d a uloÅ¾Ã­ ho na disk. Vy jen dÃ¡vÃ¡te instrukce, jakÃ© objekty mÃ¡ umÄ›t kontejner vyrÃ¡bÄ›t a jak pÅ™esnÄ›. A tyhle instrukce jsou zapsanÃ© v [konfiguraÄnÃ­ch souborech|bootstrap#konfigurace-di-kontejneru], pro kterÃ© se pouÅ¾Ã­vÃ¡ formÃ¡t [NEON|NEON format] a tedy majÃ­ i pÅ™Ã­ponu `.neon`.

KonfiguraÄnÃ­ soubory slouÅ¾Ã­ ÄistÄ› k instruovÃ¡nÃ­ DI kontejneru. TakÅ¾e kdyÅ¾ napÅ™Ã­klad uvedu v sekci [session|configuring#Session] volbu `expiration: 14 days`, tak DI kontejner pÅ™i vytvÃ¡Å™enÃ­ objektu `Nette\Http\Session` reprezentujÃ­cÃ­ho session zavolÃ¡ jeho metodu `setExpiration('14 days')` a tÃ­m se konfigurace stane realitou.

Je tu pro vÃ¡s pÅ™ipravenÃ¡ celÃ¡ kapitola popisujÃ­cÃ­, co vÅ¡e lze [konfigurovat |configuring] a jak [definovat vlastnÃ­ sluÅ¾by |di-services].

Jakmile do vytvÃ¡Å™enÃ­ sluÅ¾eb troÅ¡ku proniknete, narazÃ­te na slovo *autowiring*. To je vychytÃ¡vka, kterÃ¡ vÃ¡m neuvÄ›Å™itelnÃ½m zpÅ¯sobem zjednoduÅ¡Ã­ Å¾ivot. UmÃ­ automaticky pÅ™edÃ¡vat objekty tam, kde je potÅ™ebujete (tÅ™eba v konstruktorech vaÅ¡ich tÅ™Ã­d), aniÅ¾ byste museli cokoliv dÄ›lat. ZjistÃ­te, Å¾e DI kontejner v Nette je malÃ½ zÃ¡zrak.


Moduly
======

U troÅ¡ku vÄ›tÅ¡Ã­ch aplikacÃ­ mÅ¯Å¾eme sloÅ¾ky s presentery a Å¡ablonami rozÄlenit na disku do podadresÃ¡Å™Å¯ a v kÃ³du do jmennÃ½ch prostorÅ¯, kterÃ½m Å™Ã­kÃ¡me moduly. Pokud by naÅ¡e aplikace obsahovala napÅ™Ã­klad moduly `Front` a `Admin`, jejÃ­ struktura by mohla vypadat takto:

/--pre
<b>app/</b>
â”œâ”€â”€ <b>Modules/</b>              â† adresÃ¡Å™ s moduly
â”‚   â”œâ”€â”€ <b>Admin/</b>            â† modul Admin
â”‚   â”‚   â””â”€â”€ <b>Presenters</b>    â† jeho presentery
â”‚   â”‚       â””â”€â”€ <b>templates</b> â† a Å¡ablony
â”‚   â””â”€â”€ <b>Front/</b>            â† modul Front
â”‚       â””â”€â”€ <b>Presenters</b>    â† jeho presentery
â”‚           â””â”€â”€ <b>templates</b> â† a Å¡ablony
\--

Moduly nemusÃ­ tvoÅ™it jen plochou strukturu, lze vytvÃ¡Å™et i submoduly.

Pokud by souÄÃ¡stÃ­ modulu `Front` byl presenter `Product`, tak akce `show` v tomto presenteru se zapÃ­Å¡e jako `Front:Product:show` a tÅ™Ã­da `ProductPresenter` se umÃ­stÃ­ do jmennÃ©ho prostoru napÅ™. `App\Modules\Front`:

```php
namespace App\Modules\Front;

class ProductPresenter extends Nette\Application\UI\Presenter
{
	// ...
}
```


Kam dÃ¡l?
========

ProÅ¡li jsme si zÃ¡kladnÃ­ principy aplikacÃ­ v Nette. ZatÃ­m velmi povrchnÄ›, ale brzy proniknete do hloubky a Äasem vytvoÅ™Ã­te bÃ¡jeÄnÃ© webovÃ© aplikace. Kam pokraÄovat dÃ¡l? VyzkouÅ¡eli jste si uÅ¾ tutoriÃ¡l [PÃ­Å¡eme prvnÃ­ aplikaci|quickstart/getting-started]?

KromÄ› vÃ½Å¡e popsanÃ©ho disponuje Nette celÃ½m arzenÃ¡lem [uÅ¾iteÄnÃ½ch tÅ™Ã­d|utils], [databÃ¡zovou vrstvou|database], atd. Zkuste si schvÃ¡lnÄ› jen tak proklikat dokumentaci. Nebo [blog|https://blog.nette.org]. ObjevÃ­te spoustu zajÃ­mavÃ©ho.

AÅ¥ vÃ¡m framework pÅ™inÃ¡Å¡Ã­ spoustu radosti ğŸ’™


{{composer: nette/application}}
